<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-2024/php" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">php相关存档 | Lucas Blog</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://xbpk3t.github.io/zh-Hans/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://xbpk3t.github.io/zh-Hans/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://xbpk3t.github.io/zh-Hans/2024/php"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" property="og:locale:alternate" content="en"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="php相关存档 | Lucas Blog"><meta data-rh="true" name="description" content="php.yml"><meta data-rh="true" property="og:description" content="php.yml"><link data-rh="true" rel="icon" href="/zh-Hans/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://xbpk3t.github.io/zh-Hans/2024/php"><link data-rh="true" rel="alternate" href="https://xbpk3t.github.io/zh-Hans/2024/php" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://xbpk3t.github.io/2024/php" hreflang="en"><link data-rh="true" rel="alternate" href="https://xbpk3t.github.io/2024/php" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://RV6E9N0CVW-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-G0687BFERF"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-G0687BFERF",{anonymize_ip:!0})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Lucas Blog" href="/zh-Hans/opensearch.xml"><link rel="stylesheet" href="/zh-Hans/assets/css/styles.f801ea4a.css">
<script src="/zh-Hans/assets/js/runtime~main.cb338689.js" defer="defer"></script>
<script src="/zh-Hans/assets/js/main.51d3cc6e.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/zh-Hans/"><div class="navbar__logo"><img src="/zh-Hans/img/logo.svg" alt="Hacking" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/zh-Hans/img/logo.svg" alt="Hacking" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Hacking</b></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/zh-Hans/">Archive</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active">2024</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/2024/geektime-lessons">速读几本极客时间课程</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/2024/reading-methods">《聪明的阅读者》读书笔记</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/2024/monthly9">Monthly#9</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/2024/mysql-lessons">《MySQL 45讲》读书笔记</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/2024/goreleaser">用 goreleaser 代替 changelogithub</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/2024/tech-team-managing">《技术管理实战 36 讲》读书笔记</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/2024/flomo-bulk-delete">flomo批量删除脚本</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/2024/deprecated-commands">备份gh.yml中废弃的repo命令</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/2024/alfred-vs">alfred-vs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/2024">s</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/2024/running">running</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/2024/Design-Pattern">设计模式</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/2024/code-spec">代码规范</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/zh-Hans/2024/php">php相关存档</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/2024/regex">regex</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/2024/ssh-protocol">ssh协议</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/2024/tcpdump">tcpdump</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/2024/xq">相亲</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/2024/zhihu">知乎文章摘录</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/2024/buy-byd-seal-06gt">【海豹06GT】购车记录</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/2024/feed-manage-2">信息  源管理2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/2024/monthly8">Monthly#8</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/2024/sun-zi">《孙子兵法》读书笔记</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/2024/system-design-interview">《搞定系统设计：面试敲开大厂的门》</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/2024/how-to-write-commentary">《时评写作十讲》读书笔记</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/2024/how-to-write-book-review">怎么写书评？</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/2024/zai-zhi-tian-xia">《宰执天下》书评</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/2024/wechat-read-app">微信读书APP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/2024/golang-error">golang错误处理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/2024/record-for-paris-olympics">巴黎奥运会纪录</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/2024/sql">常用mysql sql整理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/2024/pre-commit">为什么在CI中应该用pre-commit代替linters?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/2024/argumentative-writing">议论文</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/2024/feed-manage-1">信息源管理1（rss）</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/2024/shell-syntax">shell脚本常用语法</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/2024/weekly13">Weekly#13</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/2024/politics-of-legitimacy">《合法性的政治》读书笔记</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/2024/leng-jing">【Hac棱镜】文章合集</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">2023</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/2023/weekly52">Weekly#52</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/2023/weekly40">Weekly#40</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/2023/kernel">《趣谈 Linux 操作系统》读书笔记</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/2023/network-protocol">network-protocol</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/2023/secretary-work-handbook">《秘书工作手记》读书笔记</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/2023/capital-in-the-twenty-first-century">《21世纪资本论》读书笔记</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/2023/ru-zi-di">《孺子帝》读后感</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/2023/renamer-tool">文件批量重命名工具</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/2023/feng-hua-marathon">复盘奉化马拉松</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">2000</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/minimalist">极简生活</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/books">books.yml</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/docs">docs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/movies">movies.yml</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/music">music常识</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/tv">tv.yml</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/x">x</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/zh-Hans/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">2024</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">php相关存档</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>php相关存档</h1><div class="container_mg8B margin-vert--md"><time datetime="2024-9-14">2024年9月14日</time></div></header><div class="toolbar_VBrL"></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="phpyml">php.yml<a href="#phpyml" class="hash-link" aria-label="php.yml的直接链接" title="php.yml的直接链接">​</a></h2>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PHP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">repo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//github.com/php/php</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">src</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">des</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> The PHP Interpreter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">qs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 怎么评价PHP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 有效负载</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> How does PHP works</span><span class="token punctuation" style="color:#393A34">?</span><span class="token plain"> PHP components</span><span class="token punctuation" style="color:#393A34">?</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Zend</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Extensions</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> sapi</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Application 如果 PHP 是一辆车，那么车的框架就是 PHP 本身，Zend 是车的引擎（发动机），Ext 下面的各种组件就是车的轮子，Sapi 可以看做是公路，车可以跑在不同类型的公路上，而一次 PHP 程序的执行就是汽车跑在公路上。因此，我们需要：性能优异的引擎 + 合适的车轮 + 正确的跑道。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PHP interpreter</span><span class="token punctuation" style="color:#393A34">?</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PHP code </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"> Token </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"> AST </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"> Opcodes </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"> Execute Opcodes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 默认的 PHP interpreter(sapi)，使用 OPcache，使用 JIT 动态编译，这三者有什么区别？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;***How to optimize PHP? Why has PHP7 perf improved so much?***&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 几种PSR规范</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Code Spec(PSR1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> PSR2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 内容很多，但是无须注意直接用cs</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">fixer即可)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> logging(PSR3)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Autoload(PSR4)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PHP 操作指针函数</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PHP 数组函数</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 取差集和交集 diff函数</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> intersect</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PHP 数组回调函数</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> array_reduce()</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> array_map()</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> array_filter()</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> array_walk()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PHP 排序函数</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> sort()/rsort()</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> asort()/arsort()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> array_search()</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> in_array()</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> array_key_exists() 的区别？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> array+array 和 array_merge()？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PHP   字符串函数</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> pos</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> replace</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> slashes</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cmp</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 打印输出</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> strtr() 和 str_replace() 的区别</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> perf</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> is case sensitive</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PHP 文件相关函数</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> php 如何保留两位小数？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> php 如何返回随机小数？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 类型声明（type hint）有哪些？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PHP的OOP语法</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> php 自动加载的演进过程？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PHP 的异常处理？PHP有哪些预定义Exception</span><span class="token punctuation" style="color:#393A34">?</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 错误和异常是两码事</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> try</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">catch</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> throwable(php7 之后才有的)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PHP 有哪些预定义接口类？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Iterator</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Generator</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Closure</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> JsonSerializable</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PHP 闭包(Closure)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> use</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> bindTo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PHP 魔术方法</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 4</span><span class="token important">*2</span><span class="token plain"> + 2</span><span class="token important">*4</span><span class="token plain"> = 16</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PHP Attributes</span><span class="token punctuation" style="color:#393A34">?</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PHP 预定义变量</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PHP 全局变量 (全局预定义变量)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $_GET</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> $_POST</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> $_COOKIE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PHP 魔术常量都有哪些？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PHP 预定义常量都有哪些？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 怎么定义常量？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> const 和 define）Const 关键字在类内定义常量，define 在类外定义常量</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> public</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> private</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> protected</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> final</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> static 各自的使用场景？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> “三元运算符”的几种写法？tricks写法？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;($a = $a ?: 1) ($a = $a ?? 1) ($a = $a ? $a : 1) ($len = $type == &#x27;year&#x27; ? 4 : 2;)&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> instanceof</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $data as </span><span class="token important">&amp;$key</span><span class="token plain"> 是什么意思？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> php的xdebug断点调试怎么搞？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">u</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//gist.github.com/XBPk3T/4596477bd95bd797e5cb582d5f60abf4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 其实php的xdebug断点调试也很简单，pecl install xdebug之后，修改 php.ini 中ext相关配置即可</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">qq</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">topic</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">qs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 抽象类里可以没有抽象方法吗？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 抽象类中可以没有抽象方法（全部都是普通方法），那么，抽象类和普通类的区别就在于：抽象类只能继承，不能 实例化。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 抽象类和接口类的区别？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 接口类是特殊的抽象类。接口类不能声明变量，只能声明常量。抽象类可以声明变量。接口类没有构造方法，抽象类可以有。接口类就是一个类的领导者，指明方向，子类必须完成他指定的方向，就是要实现什么都已经规定好了。抽象类就是把相同的抽出来了，不需要必须使用，继承的时候使用 extends 继承。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> implements</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> extends</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 接口继承用 implements，抽象类继承用 extends</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> trait</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Trait 解决了 PHP 不能多继承的问题，“看起来像 interface，但是用起来像 class 的东西”</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 如果两个 trait 里有同名方法或者属性怎么办？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 使用 instanceof() 和 as 来解决。instanceof() 关键字用前者取代了后者，as 关键字给被取代的方法起了一个别名。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//github.com/composer/composer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">des</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PHP PKG Manager</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">qs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;**composer 自动加载原理？(有时间自己实现一下自动加载) 把 composer 包名字写到 require 里，执行 update，具体是怎么把包自动加载到 laravel 里的？能不能说一下？**&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> composer.json 文件里都有什么？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PSR规范 (PSR</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">4)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> composer SemVer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> composer commands (remove/show/update/self</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">update/dump</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">autoload)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 怎么开发 Composer 包？实战</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//github.com/PHP</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">CS</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">Fixer/PHP</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">CS</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">Fixer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">des</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 代码规范工具</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">cmd</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">c</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> php</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">cs</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">fixer fix $PWD </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">config=cs.php</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">qs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">u</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//gist.github.com/XBPk3T/8ba0b43a6d38906c12825d5dede1e22a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PHP Linters</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//github.com/phpstan/phpstan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">des</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 静态检查工具Static Analysis Tool，和 cs</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">fixer 一样，一种是作为服务，一种是作为一个 laravel 的 composer 包。建议作为服务使用，以免影响生产环境性能，当然作为包使用更方便。如果laravel项目可以使用larastan。除此之外，其他工具还有 phplint、phpqa、grumPHP。需要注意PHP作为Dynamic</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">Lang，SAT工具实际上很鸡肋。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//github.com/larastan/larastan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">cmd</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">c</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> php artisan code</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">analyse </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">level=4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//github.com/laravel/laravel</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">qs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;***How to optimize laravel?***&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> laravel 里使用了哪些设计模式？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> laravel 文件夹结构</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> laravel 的工作原理？laravel 路由加载原理？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> laravel 不读某个字段？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 用$hidden 属性在 model 里设置隐藏字段和安全 字段</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> laravel 里 model 属性的隐藏，展示和临时隐藏？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $hidden</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> $visible</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 临时隐藏：return $user</span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">makeVisible(&#x27;attribute&#x27;)</span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">toArray();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> laravel 的$appends 属性怎么用？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> appends 属性用来临时添加某个数据库里没有的字段，实现动态修改模型，使用 getColumnAttribute() 来定义字段数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 同一个 model 使用不同 connections 连接不同数据库，使用事务时，即使报错也无法回滚，怎么处理？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> DB</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">connection(&#x27;some_connection&#x27;)</span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">beginTransaction();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> laravel 单元测试的文件上传？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $fakeImg = UploadedFile</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">fake()</span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">image(&#x27;temp.jpg&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> laravel 里多对多的写入和查询怎么做？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> laravel 里服务容器的工作原理？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> laravel 的 elq 关联关系中的 loadMissing() 和 getDirty() 方法的区别？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> laravel 里多态关系的表单验证</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> laravel 怎么添加自定义校验规则？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 在 AppServiceProvider 里通过 Validator</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">extend 注册自定义规则，如果规则比较复杂，也课可以通过 make</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">rule 生成一个对应的自定义规则类。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 为什么要用 service</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">container 呢？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">qq</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">topic</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> service</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">provider</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">qs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> laravel 为什么需要 service</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">provider</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> register() 就是 service</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">provider 用来往 service</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">container 里注册服务的</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> service</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">provider 的加载和执行过程</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> service</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">provider 的boot()</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> provides() 和$defer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">topic</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> facade</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">qs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> facade 是什么？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> facade 的工作原理？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> laravel 是怎么实现 facade 的？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">topic</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> queue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">qs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 多个 laravel 同时运行时，队列互串的问题，怎么解决？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> laravel 里如何限制队列执行频率和队列长度？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> laravel 里队列，如何给不同的队列设置不同的 list？如何修改某个队列的 driver？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 这块还要注意 trait 属性不能通过重新定义直接重写的问题，最好在构造方法里重写</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 消息推送是否应该放到队列里？队列里应该放什么逻辑？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 应该放耗时任务，一些逻辑无关的业务，一些错误容忍性高的业务。比如一些使用了与逻辑无关的第三方应用（比如消息推送，一次两次的失败是可以接收的；当然，一些与逻辑有关的第三方应用应该做好容错）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> laravel 队列的 fail</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> retry</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> delay</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">cmd</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">c</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> composer dump</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">autoload </span><span class="token important">&amp;&amp;</span><span class="token plain"> php artisan optimize </span><span class="token important">&amp;&amp;</span><span class="token plain"> php artisan cache</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">clear </span><span class="token important">&amp;&amp;</span><span class="token plain"> php artisan config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">clear </span><span class="token important">&amp;&amp;</span><span class="token plain"> php artisan route</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">clear </span><span class="token important">&amp;&amp;</span><span class="token plain"> php artisan view</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">clear </span><span class="token important">&amp;&amp;</span><span class="token plain"> php artisan api</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cache </span><span class="token important">&amp;&amp;</span><span class="token plain"> php artisan config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">clear</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">c</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> php artisan horizon</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> horizon是laravel提供的background job工具，用来管理laravel的MQ，支持各种MQ服务包括beanstalked、redis、RabbitMQ之类的</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">c</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> php artisan serve </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">host=局域网ip </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">port=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 怎么把laravel服务暴露在局域网？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//github.com/laravel/valet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">des</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        大概是最好用的laravel开发环境部署工具，比 Vagrant 和 Homestead 之类的都更易用。实话说PHP开发环境确实挺难搞的，要弄一堆东西，如果用valet的话，就舒服很多。另外，valet除了原生支持laravel以外，还支持slim, symfony, wordpress以及Drupal, CakePHP之类很多国外比较常用的PHP框架，如果官方不支持也可以从gh搜到类似 ThinkPHP5ValetDriver 这样的driver，非常实用，可以免受各种安装PHP环境之苦。</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        吐槽一下valet，不得不说虽然已经，但是使用流程仍然很别扭，最核心的问题就是，不应该用composer来安装valet（而是应该用）。可以理解为层级问题，依赖关系为php </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"> composer </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"> valet，然后需要用valet再</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        需要先park再link，park本身就可以给该dir下的所有</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pecl install igbinary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pecl install redis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">我不理解，为啥用valet提供的虚拟域名，就会报“不支持</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> redis”的bug，用 run启动built</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">in的server，就没有这个问题。有点离谱，就这个问题至少搞了1h。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">cmd</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">c</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> valet park</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">c</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> valet link &lt;service</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">c</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> valet forget</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">c</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> valet paths</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 用来查看所有link的服务</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">c</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> valet log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 用来查看valet日志</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">c</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> valet start/restart/stop/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">c</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> valet uninstall</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 需要先用这个命令卸载valet，再在composer全局卸载</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//github.com/shivammathur/homebrew</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">php</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">des</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 这个就是valet在用的用来切换PHP版本的repo，因为homebrew对</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//github.com/dingo/api</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">des</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 已经EOL了。用来实现接口的路由版本管理，dingo 内置的异常处理（Http Exception）、多种认证方式、接口限流，以及最常用的 transformer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//github.com/tymondesigns/jwt</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">auth</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">des</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> JWT Token for laravel. 用来实现用户认证</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">qs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> jwt 是什么？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> header(加密算法)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> payload(exp 过期时间，sub 是 jwt 的主体，通常是用户的 id)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> sign(保证 token 不被篡改)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 安装 jwt 以及配置</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 为什么需要刷新 token？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 因为设置有效期后，token 会失效，所以需要刷新 token</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 怎么使用刷新 token？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 如果 jwt 被截取了，怎么办？假设一个场景，黑客抓到了用户 a 的 jwt，使用用户 a 的 jwt 进行各种操作，怎么办？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> token 的验证流程？要看源码</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 如果刷新 token 过期了，怎么办？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 如果 refresh token 过期，就需要用户重新登录了</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 当然还可以把这个机制设计得更复杂一些，比如，Refresh Token 每次使用的时候，都更新它的过期时间，直到与它的创建时间相比，已经超过了非常长的一段时间（比如三个月），这等于是在相当长一段时间内允许 Refresh Token 自动续期。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> jwt</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">auth 黑名单</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> laravel+dingo 的第三方登录</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> jwt 怎么实现多表多用户系统的隔离？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//github.com/thephpleague/fractal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">des</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Used To Return RESTful API Data Format(JSON). 实际上就是 dingo 默认的 transformer 层</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">qs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> fractal 的基本使用？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> DAS</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">AS</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">JAS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 怎么直接切换 fractal 提供给我们的三种数据结构？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 如何返回自定义格式的接口？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> CustomSerializer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># [一份经过时间检验的 Laravel PHPUnit 测试经验分享 | Laravel China 社区](https://learnku.com/articles/44675)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//github.com/sebastianbergmann/phpunit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">qs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 断言有哪几种？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;**phpunit.xml 文件说明**&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 需要现在 phpunit.xml 里预定义各项配置</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> laravel 的 tests 文件夹的结构？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> tests 的两个子目录，Feature 用来功能测试，Unit 用来单元测试</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;*多环境下，怎么使用对应环境的 phpunit？*&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 添加 .env.dev</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> .env.prod 之类的env文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 怎么模拟认证用户？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 文件上传怎么单测？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 有哪些对于 phpunit 的增强方案？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> phpunit 测试覆盖率</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 怎么用单元测试来测试 laravel 中间件？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//github.com/mikeerickson/phpunit</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pretty</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">printer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">des</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> phpunit 美化</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//github.com/mockery/mockery</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">des</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Mock Test For PHP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">qs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">q</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> php 有哪些 stub 库？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//github.com/spatie/laravel</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">query</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">builder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">des</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> query</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">builder嘛</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//github.com/orchestral/testbench</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">des</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> benchmark test for PHP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//github.com/DarkaOnLine/L5</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">Swagger</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">des</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> swagger for laravel</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">cmd</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">c</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> php artisan l5</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">swagger</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">generate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//github.com/perftools/xhgui</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">des</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PHP的性能分析工具都不太靠谱，差不多能用的只有只有这个了，其他的blackfire、z</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ray、oneapm、new</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">relic都不太行。xhgui是基于tideways和xhprof实现的。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//github.com/Jiannei/lumen</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">api</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">starter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">des</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 非常完善的api</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">starter，可以参考，不逊于我的laravel</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">starter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//github.com/z</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">song/laravel</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">admin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">des</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 曾经</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//github.com/jqhph/dcat</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">admin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//github.com/strapi/strapi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">des</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 非常好用的后台，可以理解为某种js生态下的laravel</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">admin，通过定义一些schema或者meta数据，通过在该平台上点击就可以生成API，也内置了low</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">code来生成页面，通过后台操作把二者串起来就ok了。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="php-运行原理">PHP 运行原理<a href="#php-运行原理" class="hash-link" aria-label="PHP 运行原理的直接链接" title="PHP 运行原理的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="概述">概述<a href="#概述" class="hash-link" aria-label="概述的直接链接" title="概述的直接链接">​</a></h3>
<p>3 转 1 执行：</p>
<div class="language-markdown codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-markdown codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">PHP代码 -&gt; 转Token -&gt; 转AST抽象语法树 -&gt; 转Opcodes -&gt; 执行opcodes</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<ul>
<li><em>通过词法分析得到 token</em> Token 是 PHP 代码被切割成的有意义的标识。PHP7 一共有 137 种 Token，在 zend_language_parser.h 文件中做了定义。</li>
<li><em>基于语法分析器将 token 转化为<code>抽象语法树AST</code></em>
<ul>
<li>Token 就是一个个的词块，但是单独的词块不能表达完整的语义，还需要借助一定的规则进行组织串联。所以就需要语法分析器根据语法匹配 Token，将 Token 进行串联。语法分析器串联完 Token 后的产物就是抽象语法树（AST，Abstract Syntax Tree）。</li>
<li>AST 是 PHP7 版本的新特性，之前版本的 PHP 代码的执行过程中是没有生成 AST 这一步的。它的作用主要是实现了 PHP 编译器和解释器的解耦，提升了可维护性。</li>
</ul>
</li>
<li><em>将语法树转换为 Opcode</em> 需要将<code>AST语法树</code>转换成 Opcode，才能被引擎直接执行。</li>
<li><em>执行 Opcode</em> opcodes 是 opcode 的集合形式，是 PHP 执行过程中的中间代码。PHP 工程优化措施中有一个比较常见的“开启 opcache”，指的技术这里将 opcodes 进行缓存。通过省去从源码到 opcode 的阶段，引擎直接执行缓存好的 opacode，以提升性能。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="php-组成部分">PHP 组成部分<a href="#php-组成部分" class="hash-link" aria-label="PHP 组成部分的直接链接" title="PHP 组成部分的直接链接">​</a></h3>
<p>从图上可以看出，PHP 从下到上是一个 4 层体系：</p>
<p>Zend（Zend 引擎，Zend API，Zend 拓展 API）</p>
<ul>
<li>引擎 (Zend)+组件 (ext) 的模式降低内部耦合</li>
<li>Zend 引擎：Zend 整体用纯 C 实现，是 PHP 的内核部分，它将 PHP 代码翻译（词法、语法解析等一系列编译过程）为可执行 opcode 处理，并实现相应的处理方法，实现了基本的数据结构（如 hashtable、oo）、内存分配及管理、提供了相应的 api 方法供外  部调用，是一切的核心，所有的外围功能均围绕 Zend 实现。
PHP 拓展</li>
<li>Extensions：围绕着 Zend 引擎，extensions 通过组件式的方式提供各种基础服务，我们常见的各种内置函数（如 array 系列）、标准库等都是通过 extension 来实现，用户也可以根据需要实现自己的 extension 以达到功能扩展、性能优化等目的（如贴吧正在使用的 PHP 中间层、富文本解析就是 extension 的典型应用）
sapi(隔绝 web server 和 PHP)</li>
<li><em>PHP 提供了很多种 SAPI，常见的提供给 Apache、Nginx、IIS6/7 的 FastCGI，单独给 IIS 的 ISAPI，以及 Shell 的 CLI</em></li>
<li>Sapi 全称是 Server Application Programming Interface，也就是服务端应用编程接口，Sapi 通过一系列钩子函数，使得 PHP 可以和外围交互数据，<em>这是 PHP 非常优雅和成功的一个设计，通过 sapi 成功的将 PHP 本身和上层应用解耦隔离，PHP 可以不再考虑如何针对不同应用进行兼容，而应用本身也可以针对自己的特点实现不同的处理方式</em>
PHP 应用</li>
<li>Application：这就是我们平时编写的 PHP 程序，通过不同的 sapi 方式得到各种各样的应用模式，如通过 webserver 实现 web 应用、在命令行下以脚本方式运行等等。</li>
<li>如果 PHP 是一辆车，那么车的框架就是 PHP 本身，Zend 是车的引擎（发动机），Ext 下面的各种组件就是车的轮子，Sapi 可以看做是公路，车可以跑在不同类型的公路上，而一次 PHP 程序的执行就是汽车跑在公路上。因此，我们需要：性能优异的引擎 + 合适的车轮 + 正确的跑道。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sapi">Sapi<a href="#sapi" class="hash-link" aria-label="Sapi的直接链接" title="Sapi的直接链接">​</a></h3>
<p>从图上可以看到，PHP 实现了一个典型的动态语言执行过程：<em>拿到一段代码后，经过词法解析、语法解析等阶段后，源程序会被翻译成一个个指令 (opcodes)，然后 ZEND 虚拟机顺次执行这些指令完成操作</em>。PHP 本身是用 C 实现的，因此最终调用的也都是 C 的函数，实际上，我们可以把 PHP 看做是一个 C 开发的软件。</p>
<ul>
<li>PHP 线程安全和非线程安全有什么区别？线程安全在执行时，会进行线程安全检查，用来防止有新要求就启动新要求，耗尽系统资源</li>
<li>PHP 进程之间的通信机制</li>
<li>PHP-FPM 和 Nginx<!-- -->
<ul>
<li>nginx 和 PHP-FPM 的通信机制？</li>
<li>php-fpm 和 nginx 两种通信方式的区别？</li>
</ul>
</li>
<li>PHP-FPM 的进程管理模式</li>
<li>PHP-FPM 内存泄露问题</li>
<li>为什么 PHP-FPM 会出现内存泄漏的问题？</li>
<li>如何解决 PHP-FPM 导致内存泄露的问题？<!-- -->
<ul>
<li>对于 PHP-FPM 多进程的模式，想要避免内存泄漏问题很简单，就是要让 PHP-CGI 在处理一定数量进程后退出即可。否则 PHP 应用或者第三方模块（如 image magick 拓展）导致的内存泄漏问题会导致内存不足</li>
<li>在 PHP-FPM 配置文件中，将 pm.max_requests 这个参数设置小一点；（这个参数的含义是，一个 PHP-FPM 子进程最多处理 pm.max_requests 个用户请求后，就会被销毁；当一个 PHP-FPM 进程被销毁后，他将占用的所有内存都会被回收）</li>
</ul>
</li>
</ul>
<hr>
<p>php-fpm 进程被打满了，原因还是比较复杂的</p>
<p>直接原因是 php-fpm 里的<code>max_children</code>和<code>max_requests</code>等配置开的太大，通过<em>调小</em><code>进程数</code>以及<code>进程最大内存</code>，可以解决这个问题</p>
<p>根本原因还是“机器无法满足”</p>
<ul>
<li>机器性能太低</li>
<li><strong>PHP 实现的服务，本身<code>有效负载</code>很低</strong></li>
</ul>
<p>什么是有效榨取？</p>
<p><em>PHP 应用通过 PHP-FPM 这种 CGI 模式处理请求，每个请求都需要重新加载整个框 架，重新创建 MySQL/Redis/MQ 连接池，最终导致相同 QPS 下，PHP 的 CPU 很快就被打满了，也就是说，硬件相同的情况下，性能更差。</em></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="php-基础">PHP 基础<a href="#php-基础" class="hash-link" aria-label="PHP 基础的直接链接" title="PHP 基础的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="php-的-changelog">PHP 的 changelog？？<a href="#php-的-changelog" class="hash-link" aria-label="PHP 的 changelog？？的直接链接" title="PHP 的 changelog？？的直接链接">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="php7">PHP7<a href="#php7" class="hash-link" aria-label="PHP7的直接链接" title="PHP7的直接链接">​</a></h4>
<ul>
<li><em>PHP7 的严格模式和类型声明</em>(标量类型声明，返回类型声明)</li>
<li>性能提升 (为什么 PHP7 的性能提升很大？)<!-- -->
<ul>
<li>变量存储字节减小，减少内存占用，提升变量操作速度</li>
<li>改善数组结构，数组元素和 hash 映射表被分配在同一块内存里，降低了内存占用，提升了 CPU 缓存命中率</li>
<li>改进了函数的调用机制，通过优化参数传递的环节，减少了一些指令，提高执行效率</li>
</ul>
</li>
<li><code>try...catch...</code>（增加多条件判断，分出了 exception 和 error 两种异常类型）php7 之后可以一次捕捉多种类型的异常和错误，通过 | 来实现</li>
<li><code>闭包</code>；支持通过 new class 类实例化一个匿名类，可以用来代替一些阅后即焚的完整类定义</li>
<li><code>三目运算符的？？</code>如果有值则取其值，否则则取 $name = $name？？ &#x27;NoName&#x27;</li>
<li><code>飞船运算符</code>（结合比较运算符）；左边大则返回 1；左边小则返回 -1；相等则为 0</li>
<li><code>常量数组</code>，PHP7 之前只允许类或者接口使用常量数组（也就是说，PHP7 之前只能使用 const 来定义常量数组，之后 define() 这种也可以使用常量数组）</li>
<li><code>类常量也可以添加“权限修饰符”</code></li>
<li><code>iterable伪类型</code>，iterable 类型适用于数组，生成器以及实现了 Traversable 的对象，他是 PHP 中的保留类名</li>
<li>PHP7 引入了<code>可空类型</code></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="php8">PHP8<a href="#php8" class="hash-link" aria-label="PHP8的直接链接" title="PHP8的直接链接">​</a></h4>
<ul>
<li><code>Attributes</code>注解</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="php-的其他编译方式">PHP 的其他编译方式<a href="#php-的其他编译方式" class="hash-link" aria-label="PHP 的其他编译方式的直接链接" title="PHP 的其他编译方式的直接链接">​</a></h2>
<p>动态编译，静态编译，即时编译</p>
<p>AOT 就像 C/C++ 等运行之前就编译好，而 JIT 则是运行时才进行编译，保证了可移植性的需求</p>
<ul>
<li>OpCode 缓存<!-- -->
<ul>
<li>什么是 OPCode</li>
<li>OPCode 缓存和其他缓存有什么区别？</li>
<li>怎么使用 OPCache</li>
</ul>
</li>
<li>JIT</li>
<li>直接解析 PHP，使用 OPcache，使用 JIT 动态编译，这三者有什么区别？<!-- -->
<ul>
<li><em>正常使用 sapi 解析 PHP</em>：a.php-&gt;经过 zend 编译-&gt;(opcode)-&gt;PHP 解释器-&gt;(机器码)</li>
<li><em>使用 opcache 解析 PHP</em>：a.php-&gt;查找 opcode 缓存-&gt;有的话，直接用 PHP 解释器解析（缓存好的）opcode-&gt;机器码-&gt;没有就用 zend 编译为 opcode，并且缓存</li>
<li><em>使用 JIT 解析 PHP</em>：a.php-&gt;编译-&gt;机器码（代码不改变的情况下，都只执行机器码，不再经过 zend 引擎编译，sapi 这两步）</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="php-规范-psr">PHP 规范 (PSR)<a href="#php-规范-psr" class="hash-link" aria-label="PHP 规范 (PSR)的直接链接" title="PHP 规范 (PSR)  的直接链接">​</a></h2>
<p>psr 有 accepted, review, draft, abandoned, deprecated 几种</p>
<p>我们只需要知道“已经在使用的”几种就可以了；</p>
<ul>
<li>psr1 和 psr2 都是编码规范</li>
<li>psr3 是日志对接的统一接口</li>
<li>psr4 自动加载</li>
</ul>
<hr>
<p>psr1, psr2（PHP 的代码规范）</p>
<ul>
<li>文件名要写成大驼峰</li>
<li>换行<!-- -->
<ul>
<li>SQL 过长</li>
<li>方法或者函数的入参大于三个（，或者 | 或者&amp;等字符放到后面）</li>
<li>if,declare 等控制结构的参数大于三个（，或者 | 或者&amp;等字符放到后面）</li>
<li>链式操作超过两个</li>
</ul>
</li>
<li>大小写<!-- -->
<ul>
<li>命名空间的首字母大写；</li>
<li>私有方法或者私有属性，最好下划线开头；private function _privateFunc()</li>
<li>类，trait，interface 都是大驼峰；</li>
<li>方法和变量都是小驼峰；</li>
<li>不管是 const 还是 define 定义的常量都是全大写；</li>
<li>函数都是下划线连接；function snake_case()</li>
</ul>
</li>
<li>空格<!-- -->
<ul>
<li>if 后面要有空格</li>
<li>大括号前面要有空格</li>
<li>if 判断之后不能有空行</li>
<li>逗号后面必须要有一个空格</li>
<li>连续调用多个方法 (大于 3 个) 使用 foreach</li>
</ul>
</li>
</ul>
<p>psr4 自动加载</p>
<p>php 自动加载的演进过程？</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="php-多线程">PHP 多线程<a href="#php-多线程" class="hash-link" aria-label="PHP 多线程的直接链接" title="PHP 多线程的直接链接">​</a></h2>
<p>php 使用多线程？</p>
<ul>
<li>并发发起网络请求</li>
<li>curl_multi 函数组，如 curl_multi_init(), curl_multi_add_handle(), curl_multi_exec() 等函数多线程请求网络。适用场景，如多线程下载图片。</li>
<li>stream_socket_client()</li>
<li>本地并发</li>
<li>简单一些的可以直接使用异步，可以考虑 popen()，fsockopen(), cURL</li>
<li>复杂一些的，  可以考虑 PCNTL/pthreads 拓展<!-- -->
<ul>
<li>pcntl_fork()</li>
<li>pcntl_wait() 在进程数过多时，回收子进程</li>
</ul>
</li>
<li>消息队列（本身就是起到异步的作用）。与其他方法不同，把多个请求异步处理，而不是加速一个请求</li>
<li>swoole</li>
</ul>
<hr>
<p>为什么 php 很少使用多线程开发？</p>
<ul>
<li>php 的 pthreads 多线程拓展不好用</li>
<li>应用场景。php 的主要使用场景是 web，没有需要多线程才能解决的需求。（即使需要，也最好用 java/golang 来编写这部分代码），另外，多线程会引入线程安全之类的新问题，并不比单线程优越。</li>
<li>pthreads 拓展的问题。<!-- -->
<ul>
<li>php-fpm 本身已经可以多进程，从而充分利用多核进行开发。所以 php 官方不希望 php-fpm 进程里使用多线程，造成 php-fpm 不稳定。</li>
<li>不能用于 Web 服务器环境，FPM 里用不了，只能用于 CLI。</li>
<li>pthreads 需要开启 ZTS，导致肉眼可见的性能下降。</li>
<li>无法兼容 JIT，因此 pthreads 作者宣布弃坑，7.4 之后不再维护。</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="类型声明-type-hint">类型声明 type hint<a href="#类型声明-type-hint" class="hash-link" aria-label="类型声明 type hint的直接链接" title="类型声明 type hint的直接链接">​</a></h3>
<ul>
<li>通用的<!-- -->
<ul>
<li>int</li>
<li>float</li>
<li>bool</li>
<li>string</li>
<li>interfaces</li>
<li>array</li>
<li>callable</li>
<li>iterable</li>
<li>class/interface/self 类</li>
<li>递归类型 Traversable</li>
</ul>
</li>
<li>标量类型声明 (对象，接口，数组或者 callable)</li>
<li>返回类型声明<!-- -->
<ul>
<li>void 仅用在返回值</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="php-函数">PHP 函数<a href="#php-函数" class="hash-link" aria-label="PHP 函数的直接链接" title="PHP 函数的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="数组相关函数">数组相关函数<a href="#数组相关函数" class="hash-link" aria-label="数组相关函数的直接链接" title="数组相关函数的直接链接">​</a></h3>
<div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">常用数组函数</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">取差集</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">取交集</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">操作指针</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">常用回调函数</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">排序函数</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">容易混淆的数组函数</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><ul>
<li>array_keys 返回数组中部分键名或者所有键名</li>
<li>array_key_exists 看数组中是否有指定的键名或者索引</li>
<li>array_merge 合并一个或者多个数组；array_merge_recursive 递归地合并一个或者多个数组</li>
<li>array_pad 以指定长度将一个值填充进数组</li>
<li>array_product 计算数组中所有值的乘积</li>
<li>array_rand 从数组中随机取出一个或者多个元素</li>
<li>array_replace 用数组替换第一个数组的元素；array_replace_recursive 用数组递归替换第一个数组的元素</li>
<li>array_reverse 返回单元顺序相反的数组</li>
<li>array_search 在数组中搜索给定的值，如果成功则返回首个相应的键名</li>
<li>array_sum 对数组中所有值求和</li>
<li>array_unique() 移除数组中重复的值</li>
<li>array_values() 返回数组中所有的值</li>
<li>array_chunk() 将一个数组分割成多个</li>
<li>array_column() 返回数组中指定的一列</li>
<li>array_combine() 创建一个数组，用一个数组的值作为其键名，另一个数组的值作为其键值</li>
<li>array_count_values() 统计数组中所有的值</li>
<li>array_fill 填充数组；array_fill_keys 用键名和键值填充数组</li>
<li>array_flip 交换数组中的键名和键值</li>
<li>*<em>array_slice 从数组中取出一段，array_splice 去掉数组中的某一部分并用其他值取代</em></li>
</ul></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><ul>
<li>array_diff</li>
<li>array_diff_assoc, array_diff_uassoc</li>
<li>array_diff_key, array_diff_ukey</li>
<li>array_udiff</li>
<li>array_udiff_assoc, array_udiff_uassoc</li>
</ul></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p>取出两个数组相同的部分</p><ul>
<li>array_intersect</li>
<li>array_intersect_assoc, array_intersect_uassoc</li>
<li>array_intersect_key, array_intersect_ukey</li>
<li>array_uintersect</li>
<li>array_uintersect_assoc, array_uintersect_uassoc</li>
</ul></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><ul>
<li>each()；当前元素的 kv</li>
<li>current()=pos()</li>
<li>reset()</li>
<li>end()；当前元素和最后一个元素</li>
<li>next()，prev()；下一个，上一个</li>
</ul></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><ul>
<li><code>array_reduce()</code>使用回调函数迭代地将数组简化为单一的值</li>
<li><code>array_map()</code>使用自定义函数对数组中的每个元素做回调处理，自定义函数的返回值为 array*map 返回的新数组的元素；*以得到一个新数组；_<!-- -->
<ul>
<li><em>array_map 返回处理完之后的数组（最终得到一个新数组（这也是 array_map() 和 array_walk() 之间最大的区别））</em></li>
<li>array_walk_recursive()...做递归回调处理</li>
</ul>
</li>
<li><code>array_filter()</code>用回调函数过滤数组中的单元，自定义函数返回 true，则 array_filter 返回的数组保留该元素，否则删除该元素。</li>
<li><code>array_walk()</code>对给定的数组执行执行自定义函数，array*walk 返回 true/false，*操作结果影响原来的数组；_<!-- -->
<ul>
<li>array_walk() 和 array_map 一样，把函数，作用于第二个参数（数组里的每一个元素）</li>
</ul>
</li>
<li>使用 array_map() 等数组回调函数，比 foreach() 的优点有哪些？<!-- -->
<ul>
<li>使用链式调用的时候，逻辑清晰，可以避免临时变量</li>
</ul>
</li>
</ul></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><ul>
<li>sort()/rsort()<!-- -->
<ul>
<li>sort() 对索引数组进行升序排序</li>
<li>rsort() 对索引数组进行降序排序；</li>
</ul>
</li>
<li>asort() 和 arsort() 是一对<!-- -->
<ul>
<li>asort() 对关联数组按照值进行升序排序</li>
<li>arsort() 对关联数组降序；</li>
</ul>
</li>
<li>ksort() 和 krsort() krsort() 按照键名对关联数组进行排序，按照键进行逆向排序，为数组值保留原来的键；成功则返回 true，失败则返回 false</li>
<li>usort(),uasort(),uksort() 都是用户自定义排序</li>
<li>自然排序 natsort(), natcasesort()</li>
</ul></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p>array_search(), in_array(), array_key_exists() 的区别？</p><ul>
<li>in_array() 只能判断是否存在，返回 bool 值</li>
<li>array_search() 两个参数，要查找的字符串，数组</li>
<li>array_key_exists() 在 key 存在于数组里的石斛返回 true；key 可以是任何能作为数组索引的值</li>
<li>array_key_exists() 的速度比另外两个要快很多，因为 key 是哈希取得的
array+array 和 array_merge()？</li>
<li>键名为数字时，array_merge() 不会覆盖掉原来的值，但 + 合并数组则会把最先出现的值作为最终结果返回，而把后面的数组拥有相同键名的那些值“抛弃”掉；（不是覆盖）</li>
<li>键名字符时，+仍然把最先出现的值作为最终结果 返回，而把后面的数组拥有相同键名的那些值“抛弃”掉，但是 array_merge() 此时会覆盖掉前面相同键名的值</li>
</ul><p>empty(), is_null(), isset() 区别？</p><ul>
<li>isset() 判断变量是否被初始化；并不会判断变量是否为空，并且可以用来判断数组中元素是否被定义过；当使用 isset() 来判断数组元素是否被初始化时，他的效率比 array_key_exists() 高 4 倍左右</li>
<li>empty() 检测变量是否为空；任何一个未初始化的变量，值为 0 或者 false 或者“”空字符串或者 null 的变量，空数组，没有任何属性的对象，都将判断为 empty==true</li>
<li>is_null() 判断变量是否为 null</li>
</ul></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="字符串相关函数">字符串相关函数<a href="#字符串相关函数" class="hash-link" aria-label="字符串相关函数的直接链接" title="字符串相关函数的直接链接">​</a></h3>
<div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">字符相关函数</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">str</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">pos</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">replace</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">slashes</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">cmp</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">打印输出</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><ul>
<li>strtolower 字符串变成小写</li>
<li>strtoupper 变大写</li>
<li>ucfirst() 把字符串中的首字符转化为大写</li>
<li>lcfirst() 把字符串中的首字  符转化为小写</li>
<li>ucwords() 把字符串中每个单词的首字符变成大写</li>
</ul></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><ul>
<li>strstr() 查找字符串在另一个字符串中第一次出现的位置（大小写不敏感）</li>
<li>stristr() 查找字符串在另一个字符串中第一次出现的位置（大小写不敏感）</li>
<li>strchr()/strstr() 查找字符串在另一个字符串中第一次出现的位置（大小写不敏感）</li>
<li>strrchr() 查找字符串在另一个字符串中最后一次出现的位置</li>
</ul></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><ul>
<li>strpos() 第一次出现的位置（大小写敏感）</li>
<li>stripos() 第一次出现的位置（大小写不敏感）</li>
<li>strrpos() 查找字符串在另一个字符串中<em>最后一次</em>出现的位置（大小写敏感）</li>
<li>strripos() 查找字符串在另一个字符串中最后一次出现的位置（<em>大小写不敏感</em>）</li>
</ul></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><ul>
<li>str_replace() 替换字符串中的一些字符（大小写敏感）</li>
<li>str_ireplace() 替换字符串中的一些字符（大小写不敏感）</li>
<li>substr_replace() 把字符串的一部分替换成另一个字符串，三个参数</li>
</ul></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><ul>
<li>addslashes() 在预定义的字符前面加反斜杠</li>
<li>addcslashes() 在指定的字符前面加反斜杠</li>
</ul></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><ul>
<li>strncmp() 前 n 个字符的字符串比较（大小写敏感）</li>
<li>strncasecmp() 前 n 个字符的字符串比较（大小写不敏感</li>
<li>strnatcmp()...(大小写敏感)</li>
<li>strnatcasecmp() 使用一种“自然排序”算法来比较两个字符串；（大小写不敏感）</li>
</ul></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><ul>
<li>vfprintf() 把格式化的字符串写到指定的输出流</li>
<li>print()  输出一个或者多个字符串</li>
<li>printf() 输出格式化的字符串</li>
<li>sprintf() 把格式化的字符串写入一个变量中 <code>sprintf(&#x27;%02d&#x27;, $month)</code></li>
<li>vprintf() 输出格式化的字符串</li>
<li>vsprintf() 把格式化的字符串写入变量</li>
<li>fprintf() 把格式化的字符串写入到指定的输出流</li>
</ul></div></div></div>
<p>容易混淆的字符串函数</p>
<p>strtr() 和 str_replace() 的区别</p>
<ul>
<li>strtr() 性能比 str_replace() 高，但是实用性低，所以能用 strtr 的时候才用</li>
<li>strtr 区分大小写，而 str_replace() 不区分大小写</li>
<li>strtr 的第二个参数可以是数组</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="数字相关函数">数字相关函数<a href="#数字相关函数" class="hash-link" aria-label="数字相关函数的直接链接" title="数字相关函数的直接链接">​</a></h3>
<ul>
<li>有哪些常见的计算函数？</li>
<li>PHP 运算时为什么会精度丢失？<!-- -->
<ul>
<li>生活中使用十进制，但是计算机使用二进制。<em>所有十进制整数都可以转换成二进制整数，但是二进制中表示十进制的小数就比较麻烦了</em></li>
<li><em>单精度和双精度的浮点数只包括 7 位或者 15 位的有效小数位，存储需要无限位表示的小数时只能存储近似值</em></li>
</ul>
</li>
<li>PHP 精度丢失，有哪些解决方案？<!-- -->
<ul>
<li><em>任何需要十进制运算的地方，都需要用 decimal 取代 float</em></li>
<li>使用 PHP 的高精度拓展<code>BC Math</code></li>
</ul>
</li>
<li><code>BC Math</code>怎么使用？</li>
</ul>
<hr>
<ul>
<li>fmod() 求余</li>
<li>pow()x 的 y 次方</li>
<li>round() 四舍五入</li>
<li>ceil() 向上取整</li>
<li>floor() 向下取整</li>
<li>sqrt() 平方根</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="文件相关函数">文件相关函数<a href="#文件相关函数" class="hash-link" aria-label="文件相关函  数的直接链接" title="文件相关函数的直接链接">​</a></h3>
<ul>
<li>is_file() 和 file_exists() 文件存在的情况下，is_file 更快。文件不存在的情况下，file_exits() 更快。</li>
<li>filesize() 取得文件大小</li>
<li>is_readable() 判断文件是否可读</li>
<li>is_writable() 判断文件是否可写</li>
<li>is_executable() 判断文件是否可执行</li>
<li>filectime()</li>
<li>filemtime()</li>
<li>fileatime() 获取文件的上次访问时间</li>
<li>stat() 获取文件大部分属性值</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="php-垃圾回收">PHP 垃圾回收<a href="#php-垃圾回收" class="hash-link" aria-label="PHP 垃圾回收的直接链接" title="PHP 垃圾回收的直接链接">​</a></h2>
<ul>
<li>RC 是什么？</li>
<li>RC 的问题？如果多个对象互相引用，那么内存对象的计数器永远都不会变成 0，如果这些变量已经没用了，就会导致内存泄漏。</li>
<li>同步回收算法 CCRC(Concurrent Cycle RC) 把 RC 算法里的简单计数器改为了一套可以检测出对象互相引用的算法，并且加入了“根缓冲区”，当“根缓冲区”满了之后，执行一次 GC，从而将内存占用限制在一个阈值里。</li>
<li>与垃圾回收算法相关的 PHP 配置<!-- -->
<ul>
<li>修改 php.ini 中的 zend.enable_gc 来打开或关闭 PHP 的垃圾回收机制</li>
<li>通过调用 gc_enable() 或 gc_disable() 打开或关闭 PHP 的垃圾回收机制</li>
<li>在 PHP5.3 中即使关闭了垃圾回收机制，PHP 仍然会记录可能根到根缓冲区，只是当根缓冲区满额时，PHP 不会自动运行垃圾回收，当然，任何时候您都可以通过手工调用 gc_collect_cycles() 函数强制执行内存回收。</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="php-的引用计数--同步回收算法的具体流程">PHP 的引用计数 + 同步回收算法的具体流程？<a href="#php-的引用计数--同步回收算法的具体流程" class="hash-link" aria-label="PHP 的引用计数 + 同步回收算法的具体流程？的直接链接" title="PHP 的引用计数 + 同步回收算法的具体流程？的直接链接">​</a></h3>
<ol>
<li>
<p>首先 PHP 会分配一个固定大小的<code>根缓冲区</code>，用于存放固定数量的 zval，当<code>根缓冲区</code>满额时，PHP 就会执行垃圾回收；具体流程如下：</p>
</li>
<li>
<p>对每个<code>根缓冲区</code>中的<code>根zval</code>按照<code>深度优先遍历算法</code>遍历所有能遍历到的 zval，并将每个 zval 的 refcount 减 1，并将其标记为“已减” (为了避免对同一 zval 多次减 1(因为可能不同的根能遍历到同一个 zval))</p>
</li>
<li>
<p>再次对每个缓冲区中的根 zval 深度优先遍历，如果某个 zval 的 refcount 不为 0，则对其加 1，否则保持其为 0。</p>
</li>
<li>
<p>清空<code>根缓冲区</code>中的所有根 (注意是把这些 zval 从缓冲区中清除而不是销毁它们)，然后销毁所有 refcount 为 0 的 zval，并收回其内存。</p>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="同步回收具有以下几点特性">“同步回收”具有以下几点特性<a href="#同步回收具有以下几点特性" class="hash-link" aria-label="“同步回收”具有以下几点特性的直接链接" title="“同步回收”具有以下几点特性的直接链接">​</a></h3>
<ul>
<li>并不是每次 refcount 减少时都进入回收周期，只有根缓冲区满额后才开始 GC；</li>
<li>可以解决循环引用问题。</li>
<li>可以将内存泄露保持在一个阈值以下；</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="怎么评价-rc-这种-gc-算法重要">怎么评价 rc 这种 gc 算法？（重要）<a href="#怎么评价-rc-这种-gc-算法重要" class="hash-link" aria-label="怎么评价 rc 这种 gc 算法？（重要）的直接链接" title="怎么评价 rc 这种 gc 算法？（重要）的直接链接">​</a></h3>
<p><em>rc 的问题在于，虽然不会 stw，但是因为设定了阈值，所以吞吐量上不去，这也是为什么不要使用 rc 的原因</em>，所以，还是应该好好分析<em>以 JVM 为代表的典型 GC 发展历程</em>，<em>从单线程到并行再到并发</em>，<em>从单一内存池到分代再到分区</em>，<em>从 CMS 到 G1 再到 ZGC</em>分别解决了哪些问题</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="php-的内存管理机制同步回收算法">PHP 的内存管理机制（同步回收算法）<a href="#php-的内存管理机制同步回收算法" class="hash-link" aria-label="PHP 的内存管理机制（同步回收算法）的直接链接" title="PHP 的内存管理机制（同步回收算法）的直接链接">​</a></h3>
<p>预先给出一块空间，用来存储变量，当空间不够时，再申请一块新的空间；</p>
<p>PHP 是会自动释放内存的，当 PHP 执行完成后，自动释放该次请求的所有内存。</p>
<p>php.ini 里设置的是单次请求最大允许的内存分配，</p>
<p>如果本次请求内存超过设置，</p>
<p>那么，PHP 会因为内存无法分配导致程序崩溃而结束请求；14</p>
<ul>
<li>为什么 PHP 不使用 JAVA 等语言使用的分代回收算法来实现 GC？</li>
</ul>
<p>引用计数这种 GC 有什么问题？</p>
<ul>
<li><em>rc 的问题在于，虽然不会 stw，但是因为设定了阈值，所以吞吐量上不去</em></li>
<li>应该好好分析<em>以 JVM 为代表的典型 GC 发展历程</em>，<em>从单线程到并行再到并发</em>，<em>从单一内存池到分代再到分区</em>，<em>从 CMS 到 G1 再到 ZGC</em>分别解决了哪些问题？</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="php-的-oop">PHP 的 OOP<a href="#php-的-oop" class="hash-link" aria-label="PHP 的 OOP的直接链接" title="PHP 的 OOP的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="变量">变量<a href="#变量" class="hash-link" aria-label="变量  的直接链接" title="变量的直接链接">​</a></h3>
<p>预定义变量</p>
<p>全局变量 (全局预定义变量) 在函数外部定义的变量，它的作用域从定义的地方到文件结尾</p>
<ul>
<li>$GLOBALS：global 全局变量，是一个包含了所有全局变量的组合数组，全局变量的名称就是该组合数组的键。</li>
<li>$_GET：HTTP GET 变量，通过 URL 参数传递给当前脚本的变量的数组。</li>
<li>$_POST：HTTP POST 变量，通过 HTTP POST 方式传递给当前脚本的变量的数组。</li>
<li>$_COOKIE：HTTP Cookies 变量，通过 HTTP Cookies 方式传递给当前脚本的变量的数组。</li>
<li>$_SESSION：session 变量，当前脚本可用的 SESSION 变量的数组。</li>
<li>$_REQUEST：HTTP Request 变量，默认情况下包含了 <code>$_GET</code>，<code>$_POST</code> 和 <code>$_COOKIE</code> 的数组。</li>
<li>$_FILES：HTTP 文件上传变量，通过 HTTP POST 方式上传到当前脚本的项目的数组。</li>
<li>$_SERVER：服务器信息变量，包含了诸如头信息 (header)、路径 (path)、以及脚本位置 (script locations) 等信息的数组。这个数组中的项目由 Web 服务器创建。</li>
<li>$_ENV：环境变量，通过环境方式传递给当前脚本的变量的数组。</li>
</ul>
<hr>
<p>局部变量 (局部预定义变量) 在函数内部定义的变量，它的作用域为函数定义范围内。</p>
<ul>
<li><code>$php_errormsg</code>：前一个错误信息，$php_errormsg 变量包含由 PHP 生成的最新错误信息。这个变量只在错误发生的作用域内可用，并且要求 track_errors 配置项是开启的（默认是关闭的）。</li>
<li><code>$HTTP_RAW_POST_DATA</code>：包含 POST 提交的原始数据。</li>
<li><code>$http_response_header</code>：HTTP 响应头，$http_response_header 数组与 get_headers() 函数类似。当使用 HTTP 包装器时，$http_response_header 将会被 HTTP 响应头信息填充。</li>
<li><code>$argc</code>：传递给脚本的参数数目，包含当运行于命令行下时传递给当前脚本的参数的数目。脚本的文件名总是作为参数传递给当前脚本，因此 $argc 的最小值为 1，这个变量仅在 register_argc_argv 打开时可用。</li>
<li><code>$argv</code>：传递给脚本的参数数组，包含当运行于命令行下时传递给当前脚本的参数的数组。第一个参数总是当前脚本的文件名，因此 $argv[0] 就是脚本文件名，这个变量仅在 register_argc_argv 打开时可用。</li>
</ul>
<hr>
<p>在 PHP7 怎么在声明变量时赋值而不报错？</p>
<p>属性中的变量可以初始化，但是初始化的值必须是常数，这里的常数是说 PHP 脚本在编译阶段就可以得到其值，而不依赖其他函数处理才能求值。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="常量">常量<a href="#常量" class="hash-link" aria-label="常量的直接链接" title="常量的直接链接">​</a></h3>
<ul>
<li>PHP 魔术常量都有哪些？</li>
<li>PHP 预定义常量都有哪些？</li>
<li>怎么定义常量？（const 和 define）Const 关键字在类内定义常量，define 在类外定义常量</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="修饰符">修饰符<a href="#修饰符" class="hash-link" aria-label="修饰符的直接链接" title="修饰符的直接链接">​</a></h3>
<ul>
<li>有哪些<code>访问权限修饰符</code>？</li>
<li>final 修饰符是什么？</li>
<li>使用<code>静态方法</code>的好处？</li>
<li>PHP 中静态方法和非静态方法的使用及区别？举例说明静态方法的好处？</li>
<li>为什么$this 能够访问到静态方法呢？</li>
</ul>
<hr>
<ul>
<li>public</li>
<li>protected</li>
<li>private</li>
<li>final</li>
<li>static</li>
</ul>
<hr>
<ul>
<li>final 可以修饰类，方法，属性</li>
<li>final 类不可被继承，不能被重写 (被 final 修饰的类不能被继承，只能被实例化)</li>
<li>final 方法不可被覆盖 (属性不能被定义为 final，只有类和方法才能被定义为 final)</li>
<li>final 不能修饰抽象类和接口类</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="php-运算符">PHP 运算符<a href="#php-运算符" class="hash-link" aria-label="PHP 运算符的直接链接" title="PHP 运算符的直接链接">​</a></h3>
<ul>
<li>三元运算符<!-- -->
<ul>
<li>写法 1<code>$a = $a ？ $a : 1;</code></li>
<li>写法 2<code>$a = $a ？ : 1</code>PHP5.3 引入</li>
<li>写法 3<code>$a = $a ？？ 1</code>PHP7 引入</li>
<li><code>$padLength = $type == &#x27;year&#x27; ？ 4 : 2;</code></li>
</ul>
</li>
<li>类型运算符<!-- -->
<ul>
<li>用 instanceof 来判断一个 PHP 变量是否属于某一类 class 的实例</li>
<li>instanceof 也可用来确定一个变量是不是继承自某一父类的子类的实例</li>
</ul>
</li>
<li>赋值运算符</li>
<li>逻辑运算符<!-- -->
<ul>
<li>AND 和&amp;&amp;的区别？</li>
<li>OR 和||的区别？</li>
</ul>
</li>
<li>组合比较符 (太空船运算符) 组合比较运算符可以轻松实现两个变量的比较，当然不仅限于数值类数据的比较。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="流程控制">流程控制<a href="#流程控制" class="hash-link" aria-label="流程控制的直接链接" title="流程控制的直接链接">​</a></h3>
<div class="language-markdown codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-markdown codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 判断</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> if...else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> elseif/else if</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 循环</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> while</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> do-while do...while 和 while 的区别在于保证 do 里的循环语句保证执行一次，而不是像 while 一样，先检查再执行</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> for</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> foreach</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token code-snippet code keyword" style="color:#00009f">`$infos as $key =&gt; $info`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token code-snippet code keyword" style="color:#00009f">`$infos as $info`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 多维数组；循环套循环</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 循环 + 判断</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> &amp;的应用；$data as &amp;$key 是什么意思？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> break</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> continue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 其他</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> switch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token code-snippet code keyword" style="color:#00009f">`declare`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> require</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> include</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> require_once</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> include_once</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> goto</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="类">类<a href="#类" class="hash-link" aria-label="类的直接链接" title="类的 直接链接">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="抽象类和接口类">抽象类和接口类<a href="#抽象类和接口类" class="hash-link" aria-label="抽象类和接口类的直接链接" title="抽象类和接口类的直接链接">​</a></h4>
<ul>
<li>抽象类里可以没有抽象方法吗？抽象类中可以没有抽象方法（全部都是普通方法），那么，抽象类和普通类的区别就在于：抽象类只能继承，不能实例化。</li>
<li>抽象类和接口类的区别？接口类就是一个类的领导者，指明方向，子类必须完成他指定的方向，就是要实现什么都已经规定好了。抽象类就是把相同的抽出来了，不需要必须使用，继承的时候使用 extends 继承。</li>
<li>接口类是一个特殊的抽象类</li>
<li>接口继承用 implements，抽象类继承用 extends</li>
<li>接口类不能声明变量，只能声明常量；抽象类可以声明变量。</li>
<li><em>接口类没有构造方法，抽象类可以有</em></li>
<li>一个类可以继承多个接口类，但只能继承一个抽象类；</li>
<li>接口类的每个方法都只有声明，而没有实现；他的每个方法，实现类都必须要实现；而抽象类中只需要实现抽象方法，其他方法可以实现也可以不实现</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="trait-可复用类">Trait 可复用类<a href="#trait-可复用类" class="hash-link" aria-label="Trait 可复用类的直接链接" title="Trait 可复用类的直接链接">​</a></h4>
<p><em>Trait 解决了 PHP 不能多继承的问题，“看起来像 interface，但是用起来像 class 的东西”</em></p>
<ul>
<li>如果两个 trait 里有同名方法或者属性怎么办？<!-- -->
<ul>
<li>使用 instanceof() 和 as 来解决</li>
<li><em>instanceof() 关键字用前者取代了后者，as 关键字给被取代的方法起了一个别名</em></li>
</ul>
</li>
<li>怎么看待 trait？<!-- -->
<ul>
<li>trait 相比于多继承 ；多继承有类型分裂的问题，</li>
<li>要评价 trait，首先需要解决以下几个问题<!-- -->
<ul>
<li>我们为什么需要引入多重继承？</li>
<li>引入多重继承是为了解决什么问题？</li>
</ul>
</li>
</ul>
</li>
<li>同时引入多重继承又带来了什么问题？</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="预定义类">预定义类<a href="#预定义类" class="hash-link" aria-label="预定义类的直接链接" title="预定义类的直接链接">​</a></h4>
<p>PHP 有哪些预定义类？</p>
<ul>
<li>Directory</li>
<li>Closure 闭包类</li>
<li>Exception</li>
<li>Error<!-- -->
<ul>
<li>ArithmeticError</li>
<li>AssertionError</li>
<li>DivisionByZeroError</li>
<li>ParseError</li>
<li>TypeError</li>
</ul>
</li>
<li>Throwable</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="预定义接口">预定义接口<a href="#预定义接口" class="hash-link" aria-label="预定义接口的直接链接" title="预定义接口的直接链接">​</a></h4>
<p>PHP 有哪些预定义接口类？</p>
<ul>
<li><code>Generator</code>生成器</li>
<li><code>ArrayAccess</code>数组式访问 ArrayAccess 这个预定义接口类的作用在于，让对象可以像数组一样可以被访问</li>
<li><code>JsonSerializable</code>序列化</li>
<li><code>Closure</code>闭包</li>
<li><code>Traversable</code>遍历（检测一个类是否可以使用 foreach 进行遍历的接口）</li>
<li><code>Iterator</code>迭代器接口（可在内部迭代自己的外部迭代器或类的接口）<!-- -->
<ul>
<li><code>IteratorAggregate聚合式迭代器接口</code>（创建外部迭代器的接口）</li>
<li><code>OuterIterator迭代器嵌套接口</code>（将一个或多个迭代器包裹在另一个迭代器中）</li>
<li><code>RecursiveIterator递归迭代访问接口</code>（提供递归访问功能）</li>
<li><code>SeekableIterator可索引迭代访问接口</code>（实现查找功能）</li>
</ul>
</li>
</ul>
<p>generator 可以以一种简单的方式  实现 iterator。<em>generator 实现通过 yield 关键字完成，提供了一种简单的方式实现 iterator，几乎没有任何额外开销或者需要通过实现 iterator 接口的类这种复杂方式实现迭代</em></p>
<p>玩过 node 和 python 的同学都知道 yield 这个关键字，借助 yield 的上下文运行时的切换，可以做到协程的效果，能够大大<em>减少内存的使用量以及效率</em>。比如导出和导入大量数据的时候，可以使用生成器避免内存爆出。具体看鸟哥的介绍在此，这里我们直接上代码了</p>
<p>当一个函数包含 yield，那么这个函数即不再是一个普通函数，它永远返回一个「Generator (生成器)」实例。生成器实现了 Iterator 接口，这就是为何它能够进行 foreach 遍历的原因。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="闭包">闭包<a href="#闭包" class="hash-link" aria-label="闭包的直接链接" title="闭包的直接链接">​</a></h3>
<ul>
<li>闭包是什么？</li>
<li>为什么要用闭包？</li>
<li>实现闭包的几种方法？<!-- -->
<ul>
<li>use 方法</li>
<li>bindTo 方法</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="php-的异常处理">PHP 的异常处理？<a href="#php-的异常处理" class="hash-link" aria-label="PHP 的异常处理？的直接链接" title="PHP 的异常处理？的直接链接">​</a></h3>
<p>错误和异常是两码事</p>
<p>PHP 的异常处理</p>
<div class="language-markdown codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-markdown codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> try-catch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> throwable php7 之后才有的 throwable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token hr punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> exception</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> BadFunctionCallException</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> BadMethodCallException</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> DomainException</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> InvalidArgumentException</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> LengthException</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> LogicException</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> OutOfBoundsException/OutOfRangeException/RangeException</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> OverflowException</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> RuntimeException</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> UnderflowException</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> UnexpectedValueException</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="php-工具">PHP 工具<a href="#php-工具" class="hash-link" aria-label="PHP 工具的直接链接" title="PHP 工具的直接链接">​</a></h2>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">php artisan code:analyse </span><span class="token parameter variable" style="color:#36acaa">--level</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">php artisan l5-swagger:generate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">php-cs-fixer fix </span><span class="token environment constant" style="color:#36acaa">$PWD</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--config</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">cs.php</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">composer</span><span class="token plain"> dump-autoload </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> php artisan optimize </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> php artisan cache:clear </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> php artisan config:clear </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> php artisan route:clear   </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> php artisan view:clear </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> php artisan api:cache </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> php artisan config:clear</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="composer">composer<a href="#composer" class="hash-link" aria-label="composer的直接链接" title="composer的直接链接">​</a></h3>
<div class="language-markdown codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-markdown codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#393A34">**</span><span class="token bold content">composer 自动加载原理？</span><span class="token bold punctuation" style="color:#393A34">**</span><span class="token plain">(有时间自己实现一下自动加载)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 把 composer 包名字写到 require 里，执行 update，具体是怎么把包自动加载到 laravel 里的？能不能说一下？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> composer 的版本约束？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 比较操作符来约束版本</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 使用连字符来约束版本；1.0 - 2.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 通配符来约束版本；1.0.\*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 使用^锁定大版本 </span><span class="token code-snippet code keyword" style="color:#00009f">`^1.2.3相当于&gt;=1.2.3 &lt;2.0.0`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 使用</span><span class="token strike punctuation" style="color:#393A34">~</span><span class="token strike content">锁定小版本 `</span><span class="token strike punctuation" style="color:#393A34">~</span><span class="token plain">1.2.3相当于&gt;=1.2.3 &lt;1.3.0`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> dev-分支名；这样指定版本的意思是，对应分支下的最新提交</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> composer 常用命令</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 移除不需要的包：composer remove package_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 展示这个项目里所有安装的包：composer show</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 更新所有（或者单个包）的依赖关系：composer update package</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 清除所有的 composer 缓存：composer clear-cache</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 更新到最新版本：composer self-update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 检查常见的问题：composer diagnose</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 如果 laravel 的类没有正常引入，执行 composer dump-autoload，再引入一遍</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 怎么开发 Composer 包？实战</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<p>composer.json 文件里都有什么？</p>
<ul>
<li>PSR-0(已过时)</li>
<li>PSR-4(composer 的标准自动加载方式)</li>
<li>class-map</li>
<li>直接包含 file</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="php-常用工具">PHP 常用工具<a href="#php-常用工具" class="hash-link" aria-label="PHP 常用工具的直接链接" title="PHP 常用工具的直接链接">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="代码规范工具-php-cs-fixer">代码规范工具 PHP-CS-Fixer<a href="#代码规范工具-php-cs-fixer" class="hash-link" aria-label="代码规范工具 PHP-CS-Fixer的直接链接" title="代码规范工具 PHP-CS-Fixer的直接链接">​</a></h4>
<ul>
<li>怎么安装<code>PHP-CS-Fixer</code>？使用 homebrew 安装<code>php-cs-fixer</code>，用<code>php-cs-fixer fix dir</code>直接修复</li>
<li>怎么使用 phpcs+githook+StyleCI 来保证代码规范？</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="静态检查工具">静态检查工具<a href="#静态检查工具" class="hash-link" aria-label="静态检查工具的直接链接" title="静态检查工具的直接链接">​</a></h4>
<p>phpstan</p>
<ul>
<li>和 cs-fixer 一样，一种是作为服务，一种是作为一个 laravel 的 composer 包；建议作为服务使用，以免影响生产环境性能，当然作为包使用更方便</li>
<li>larastan</li>
</ul>
<p>其他工具比如 phplint、phpqa、grumPHP</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="性能分析工具">性能分析工具<a href="#性能分析工具" class="hash-link" aria-label="性能分析工具的直接链接" title="性能分析工具的直接链接">​</a></h4>
<p><em>都不太靠谱，差不多能用的只有<code>xhprof/xhgui</code>，其他的仅做整理</em></p>
<ul>
<li>本地服务比如 z-ray、tideways+xhgui、kint、<code>blackfire</code></li>
<li>在线服务，比如 oneapm、<code>new-relic</code></li>
</ul>
<p>怎么安装 xhprof 拓展并配置</p>
<ol>
<li>安装 tideways 拓展</li>
<li>安装并部署 xhgui-branch 这个项目，作为展示 xhprof 的 web 页面</li>
<li>在想要做性能分析的项目的 nginx 配置里，先执行 xhgui</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="php-有哪些代码加密的方法">PHP 有哪些代码加密的方法？<a href="#php-有哪些代码加密的方法" class="hash-link" aria-label="PHP 有哪些代码加密的方法？的直接链接" title="PHP 有哪些代码加密的方法？  的直接链接">​</a></h4>
<p><em>总的来说分成<code>免拓展加密</code>和<code>有拓展加密</code>，两个的代表分别是<code>phpjiami</code>和<code>swoole-compiler</code></em></p>
<ul>
<li>免拓展加密 (phpjiami)</li>
<li>有拓展加密 (swoole compiler 加密)Swoole Compiler 是 Swoole 官方推出的 PHP 代码加密和客户端授权解决方案，通过业内先进的代码加密技术（流程混淆，花指令，变量混淆，函数名混淆，虚拟机保护技术，扁平化代码，sccp 优化等）将 PHP 程序源代码编译为二进制指令，来保护您的源代码</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="phpunit">phpunit<a href="#phpunit" class="hash-link" aria-label="phpunit的直接链接" title="phpunit的直接链接">​</a></h3>
<div class="language-markdown codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-markdown codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 断言有哪几种？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#393A34">**</span><span class="token bold content">phpunit.xml 文件说明</span><span class="token bold punctuation" style="color:#393A34">**</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> laravel 的 tests 文件夹的结构？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> tests 的两个子目录，Feature 用来功能测试，Unit 用来单元测试；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 单元测试专注于小的，相互隔离的代码；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 而功能测试可用于测试较大区块的代码，包括若干组件之前的交互，甚至一个接口的请求；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 单元测试的标准？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 100% 覆盖</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 自动化测试</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 变化的业务，不变的接口</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 单元测试和集成验收测试的关系</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> php 有哪些 stub 库？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> mockery</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token code-snippet code keyword" style="color:#00009f">`orchestral/testbench`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 有哪些 stub？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 虚设替身：只传递但是不会使用到的对象，一般用于填充方法的参数列表</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 存根替身：总是返回相同的预设响应，其中可能包括一些虚设状态</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 伪装替身：可以取代真实版本的可用版本。举个例子，就是写一个对方接口的预期返回，用来测试。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 模拟替身：可以表示一系列期望值  的对象，并且可以提供预设响应</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 多环境下，怎么使用对应环境的 phpunit？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 怎么模拟认证用户？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 文件上传怎么单测？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 有哪些对于 phpunit 的增强方案？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> phpunit 美化，使用</span><span class="token code-snippet code keyword" style="color:#00009f">`phpunit-pretty-result-printer`</span><span class="token plain">这个包实现对 phpunit 结果的美化。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 使用 semaphore 对 phpunit 持续集成</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> phpunit 测试覆盖率</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="laravel">laravel<a href="#laravel" class="hash-link" aria-label="laravel的直接链接" title="laravel的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="111">111<a href="#111" class="hash-link" aria-label="111的直接链接" title="111的直接链接">​</a></h3>
<ul>
<li>laravel 里如何直接使用 db 的 json 类型？如果字段是 meta，可以直接用 meta-&gt;name 这种方法取出；读操作和写操作都可以使用</li>
<li>laravel 不读某个字段？用$hidden 属性在 model 里设置隐藏字段和安全字段</li>
<li>laravel 的$appends 属性怎么用？appends 属性用来临时添加某个数据库里没有的字段，实现动态修改模型，使用 getColumnAttribute() 来定义字段数据</li>
<li>同一个 model 使用不同 connections 连接不同数据库，使用事务时，即使报错也无法回滚，怎么处理？ <code>DB::connection(&#x27;some_connection&#x27;)-&gt;beginTransaction();</code></li>
<li>laravel 单元测试的文件上传？ <code>$fakeImg = UploadedFile::fake()-&gt;image(&#x27;temp.jpg&#x27;);</code></li>
<li>laravel 里多对多的写入和查询怎么做？</li>
<li>laravel 里服务容器的工作原理？</li>
<li>laravel 的 elq 关联关系中的 loadMissing() 和 getDirty() 方法的区别？</li>
<li>laravel 里多态关系的表单验证</li>
<li>laravel 怎么添加自定义校验规则？在 AppServiceProvider 里通过 Validator::extend 注册自定义规则，如果规则比较复杂，也课可以通过 make<!-- -->:rule<!-- --> 生成一个对应的自定义规则类。</li>
</ul>
<hr>
<p>laravel 里 model 属性的隐藏，展示和临时隐藏？</p>
<ul>
<li>$hidden</li>
<li>$visible</li>
<li>临时隐藏：return $user-&gt;makeVisible(&#x27;attribute&#x27;)-&gt;toArray();</li>
</ul>
<hr>
<p>php 如何保留两位小数？</p>
<ul>
<li><code>round($num,2)</code></li>
<li><code>sprintf(&quot;%.2f&quot;,$num)</code></li>
<li><code>number_format($num, 2)</code></li>
</ul>
<p>php 如何返回随机小数？</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="laravel-核心">Laravel 核心<a href="#laravel-核心" class="hash-link" aria-label="Laravel 核心的直接链接" title="Laravel 核心的直接链接">​</a></h3>
<ul>
<li>laravel 里使用了哪些设计模式？</li>
<li>laravel 文件夹结构</li>
<li>laravel 的工作原理？laravel 路由加载原理？</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="路由分发">路由分发<a href="#路由分发" class="hash-link" aria-label="路由分发的直接链接" title="路由分发的直接链接">​</a></h4>
<ul>
<li>接收 HTTP 请求</li>
<li>由 HTTP 内核处理 HTTP 请求</li>
<li>路由分发处理（路由分发流程）</li>
<li>执行路由闭包或者控制器（运行控制器方法，补充说明）</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="服务容器">服务容器<a href="#服务容器" class="hash-link" aria-label="服务容器的直接链接" title="服务容器的直接链接">​</a></h3>
<p>为什么要用 service-container 呢？</p>
<ul>
<li>laravel 的 sc 是用来<code>管理类的依赖</code>和<code>执行依赖注入</code>的工具</li>
<li>依赖注入就是，类的依赖项通过构造函数，或者某些情况下通过 setter 方法注入到类里<!-- -->
<ul>
<li>简单绑定 bind()</li>
<li>绑定单例 singleton() <code>singleton</code> 方法将类或接口绑定到只能解析一次的容器中。绑定的单例被解析后，相同的对象实例会在随后的调用中返回到容器中</li>
</ul>
</li>
<li>绑定实例 instance() 也可以使用 instance() 方法，将现有对象实例绑定到容器中；给定的实例会始终在随后的调用中返回到容器中</li>
<li>绑定初始数据$this-&gt;app-&gt;when()-&gt;needs()-&gt;give() 当你有一个类不仅需要接受一个注入类，还需要注入一个基本值（比如整数）。你可以使用上下文绑定来轻松注入你的类需要的任何值</li>
</ul>
<p>绑定接口到实例</p>
<ul>
<li>sc 有一个强大的功能，就是将接口绑定到给定实现</li>
<li>如果我们有一个 <code>EventPusher</code> 接口和一个 <code>RedisEventPusher</code> 实现。编写完接口的 <code>RedisEventPusher</code> 实现后，我们就可以在 sc 中注册它</li>
</ul>
<p>上下文绑定</p>
<ul>
<li>有时候，你可能有两个类使用了相同的接口，但你希望每个类都能注入不同的实现。</li>
<li>例如，两个控制器可能需要依赖不同的<code>contract契约</code>实现。</li>
</ul>
<p>标记</p>
<ul>
<li>有时候，你可能需要解析某个「分类」下的所有绑定。例如，你正在构建一个报表的聚合器，它接收一个包含不同 <code>Report</code> 接口实现的数组。注册了 <code>Report</code> 实现后，你可以使用 <code>tag</code> 方法为其分配标签</li>
<li>服务被标记后，你可以通过 <code>tagged</code> 方法轻松地将它们全部解析</li>
</ul>
<p>解析</p>
<p>make() 方法</p>
<ul>
<li>用$this-&gt;app-&gt;make() 方法把 sc 里的类实例解析出来；</li>
<li>make() 的参数是，要解析的类或者接口的名称</li>
<li>如果一些类的依赖项不能通过容器去解析，可以通过将他们作为关联数组，传递到 makeWith() 方法来注入他们
自动注入</li>
</ul>
<p>容器事件</p>
<ul>
<li>每当 sc 解析 一个对象时，触发了一个事件；可以使用 resolving() 来监听这个事件</li>
<li>被解析的对象会被传递给回调函数里，让你在对象被传递出去之前，可以在对象上设置任何属性</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="服务提供器">服务提供器<a href="#服务提供器" class="hash-link" aria-label="服务提供器的直接链接" title="服务提供器的直接链接">​</a></h3>
<div class="language-markdown codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-markdown codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> laravel 为什么需要 service-provider</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> register() 就是 service-provider 用来往 service-container 里注册服务的</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> boot()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> boot() 是用来启动（事件监听之类的）相关服务</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> boot() 调用的时候，sc 里所有注册的 sp 都已经加载完了，所以可以随便调用 sc 里的任何一个 sp，也可以在 boot() 方法中，类型提示依赖，sc 会自动注册所需要的依赖</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> provides() 和$defer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> defer 属性是用来延迟加载该 sp 的 register() 方法的</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> defer 和 provides() 通常搭配使用</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> service-provider 的加载和执行过程</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="facades">Facades<a href="#facades" class="hash-link" aria-label="Facades的直接链接" title="Facades的直接链接">​</a></h3>
<ul>
<li>facade 是什么？</li>
<li>facade 的工作原理？</li>
<li>laravel 是怎么实现 facade 的？</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="队列">队列<a href="#队列" class="hash-link" aria-label="队列的直接链接" title="队列的直接链接">​</a></h3>
<ul>
<li>多个 laravel 同时运行时，队列互串的问题，怎么解决？</li>
<li>laravel 里如何限制队列执行频率和队列长度？</li>
<li>laravel 里队列，如何给不同的队列设置不同的 list？如何修改某个队列的 driver？这块还要注意 trait 属性不能通过重新定义直接重写的问题，最好在构造方法里重写</li>
<li>消息推送是否应该放到队列里？队列里应该放什么逻辑？应该放耗时任务，一些逻辑无关的业务，一些错误容忍性高的业务。比如一些使用了与逻辑无关的第三方应用（比如消息推送，一次两次的失败是可以接收的；当然，一些与逻辑有关的第三方应用应该做好容错）</li>
<li>laravel 队列的 fail, retry, delay</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="怎么优化-laravel-框架">怎么优化 Laravel 框架？<a href="#怎么优化-laravel-框架" class="hash-link" aria-label="怎么优化 Laravel 框架？的直接链接" title="怎么优化 Laravel 框架？的直接链接">​</a></h3>
<p>这不仅仅是针对 Laravel 网站的性能优化方法，其中很多是通用的网站性能优化的方法，当然还有很多可以优化的地方；</p>
<div class="language-markdown codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-markdown codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 使用缓存</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 使用内存缓存作为会话的 dirvier</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 文件缓存</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 数据库缓存</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> Redis 缓存</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 服务端代码优化</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 数据库请求优化（数据关联模型读取的时候，使用</span><span class="token code-snippet code keyword" style="color:#00009f">`延迟预加载`</span><span class="token plain">和</span><span class="token code-snippet code keyword" style="color:#00009f">`预加载`</span><span class="token plain">）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 加一些服务</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 使用 swoole</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 使用 HHVM 这个 JIT；能轻轻松松的让你的应用程序在不用做任何修改的情况下，直接提高 50% 或者更高的性能</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 使用 OPcaache</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> Nginx 开启 gzip 压缩</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token code-snippet code keyword" style="color:#00009f">`瓶颈`</span><span class="token plain">。laravel 的性能瓶颈不在于 laravel 的性能瓶颈在于数量众多的文件引用，反映到系统上就是磁盘 I/O 能力。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token code-snippet code keyword" style="color:#00009f">`lumen？`</span><span class="token plain">laravel 无法无缝切换到 lumen，且切换到 lumen，性能也只是五十步笑百步。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token code-snippet code keyword" style="color:#00009f">`hyperf`</span><span class="token plain">php 生态内可以考虑 hyperf，不考虑其他框架层面方案。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="laravel-接口">laravel 接口<a href="#laravel-接口" class="hash-link" aria-label="laravel 接口的直接链接" title="laravel 接口的直接链接">​</a></h2>
<p><em>虽然 dingo+jwt+fractal 提供的服务（比如，接口限流，fractal 提供的数据返回），laravel 现在本身都已经提供了，但是这三件套仍然是 laravel 下接口的最佳实践；</em></p>
<ul>
<li><code>dingo</code>用来实现接口的路由版本管理，dingo 内置的异常处理，以及最常用的 transformer；<!-- -->
<ul>
<li>transform</li>
<li>接口的版本管理；前缀与子域名</li>
<li>多种认证方式</li>
<li>接口限流</li>
<li>Http Exception 处理</li>
</ul>
</li>
<li><code>jwt-auth</code>用来实现用户认证</li>
<li><code>fractal</code>实际上就是 dingo 默认的 transformer 层</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="jwt-auth">JWT-Auth<a href="#jwt-auth" class="hash-link" aria-label="JWT-Auth的直接链接" title="JWT-Auth的直接链接">​</a></h3>
<p>常见问题</p>
<div class="language-markdown codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-markdown codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> jwt 是什么？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> header 说明了加密算法</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> payload 里 exp 是过期时间，sub 是 jwt 的主体，通常是用户的 id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> sign 是由服务器进行的签名，保证 token 不被篡改</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 如果使用 jwt 作为客户端到服务端的验证？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 获取客户端提交的 token</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 检测 token 中的签名 signature 是否正确</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 判断 payload 数据中的 exp，是否已经过期</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 根据 payload 数据中的 sub，取数据库中验证用户是否存在</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 上述检测不正确，则抛出相应异常</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> 如果 jwt 被截取了，怎么办？假设一个场景，黑客抓到了用户 a 的 jwt，使用用户 a 的 jwt 进行各种操作，怎么办？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> token 的验证流程？要看源码</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<p>实战</p>
<ul>
<li>安装 jwt 以及配置</li>
<li>为什么需要刷新 token？ <em>因为设置有效期后，token 会失效，所以需要刷新 token</em></li>
<li>怎么使用刷新 token？</li>
<li>如果刷新 token 过期了，怎么办？</li>
</ul>
<hr>
<ul>
<li>如果 refresh token 过期，就需要用户重新登录了</li>
<li>当然还可以把这个机制设计得更复杂一些，比如，Refresh Token 每次使用的时候，都更新它的过期时间，直到与它的创建时间相比，已经超过了非常长的一段时间（比如三个月），这等于是在相当长一段时间内允许 Refresh Token 自动续期。</li>
<li>jwt-auth 黑名单</li>
<li>laravel+dingo 的第三方登录</li>
<li>jwt 怎么实现多表多用户系统的隔离？</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="fractal">Fractal<a href="#fractal" class="hash-link" aria-label="Fractal的直接链接" title="Fractal的直接链接">​</a></h3>
<ul>
<li>fractal 的基本使用？<!-- -->
<ul>
<li><em>DAS 数据的结构是统一的，无论输出集合还是单条数据，都是 data 和 meta；而 AS 在输出单条数据时，没有 data 这层；相比之下，我们的使用频率；DAS&gt;AS&gt;JAS</em></li>
</ul>
</li>
<li>怎么直接切换 fractal 提供给我们的三种数据结构？<!-- -->
<ul>
<li>在<code>\App\Providers\AppServiceProvider</code>里的<code>boot()</code>里加这个方法</li>
</ul>
</li>
<li>如何返回自定义格式的接口？<!-- -->
<ul>
<li>在\App\Providers\AppServiceProvider::boot 里，加一个 fractal() 方法，在这里就把数据格式进行转换</li>
<li>写一个自定义的 CustomSerializer 类，来起到自定义格式的作用</li>
<li>修改<code>config/api.php</code>里的<code>errorFormat</code></li>
</ul>
</li>
</ul>
<p>接口开发</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="laravel-与接口">laravel 与接口<a href="#laravel-与接口" class="hash-link" aria-label="laravel 与接口的直接链接" title="laravel 与接口的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="接口设计">接口设计<a href="#接口设计" class="hash-link" aria-label="接口设计的直接链接" title="接口设计的直接链接">​</a></h3>
<ul>
<li>分版本。为后面接口升级做好打算。</li>
<li>提供密钥和 token。确保数据不被篡改。</li>
<li><code>restful风格</code>。读数据用 get，修改数据用 post。</li>
<li>接口返回值格式统一结构。</li>
<li>用 JSON 格式输出，记得写好头信息。如楼上所写的。</li>
<li><code>接口记录日志</code>。记录请求参数、占用内存、响应时间、响应时长。方便后续优化。</li>
<li><code>提供统一的错误码</code>。每个数字代表一种错误，需要在文档中说明。错误分系统错误和业务逻辑错误。</li>
<li><code>建立接口文档</code>。记录每个接口的用途，参数列表，返回值说明。同时给出使用例子。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="请求合法性">请求合法性<a href="#请求合法性" class="hash-link" aria-label="请求合法性的直接链接" title="请求合法性的直接链接">​</a></h3>
<p><em>请求合法性指的是该请求是否合法，包括该接口是否有 token，token 是否正确，以及接口的防重放攻击等</em></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="防重放攻击">防重放攻击<a href="#防重放攻击" class="hash-link" aria-label="防重放攻击的直接链接" title="防重放攻击的直接链接">​</a></h4>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="有哪些防重放攻击的方法">有哪些防重放攻击的方法？<a href="#有哪些防重放攻击的方法" class="hash-link" aria-label="有哪些防重放攻击的方法？的直接链接" title="有哪些防重放攻击的方法？的直接链接">​</a></h5>
<ul>
<li>验证：nonce+timestamps+sign 生成随机串来防重</li>
<li>入库：缓存层的原子性（redis 的计数器）和数据库层的唯一索引</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="noncetimestampssign分别是什么">nonce/timestamps/sign分别是什么？<a href="#noncetimestampssign分别是什么" class="hash-link" aria-label="nonce/timestamps/sign分别是什么？的直接链接" title="nonce/timestamps/sign分别是什么？的直接链接">​</a></h5>
<ul>
<li>timestamp 发送接口的失效时间</li>
<li>nonce 是随机串</li>
<li>sign 是对某项数据（比如 uid）timestamp nonce 的加密串</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="随机串防重服务器验证流程">随机串防重，服务器验证流程？<a href="#随机串防重服务器验证流程" class="hash-link" aria-label="随机串防重，服务器验证流程？的直接链接" title="随机串防重，服务器验证流程？的直接链接">​</a></h5>
<ul>
<li>先验证 sign 签名是否合理，证明请求参数没有被修改过</li>
<li>再验证 timestamp 是否过期，证明请求是最近 60s 内被发出的</li>
<li>最后验证 Nonce，证明这个请求不是 60s 内的重放请求</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="如果不同时使用这三个参数各自都有什么问题">如果不同时使用这三个参数，各自都有什么问题？<a href="#如果不同时使用这三个参数各自都有什么问题" class="hash-link" aria-label="如果不同时使用这三个参数，各自都有什么问题？的直接链接" title="如果不同时使用这三个参数，各自都有什么问题？的直接链接">​</a></h5>
<ul>
<li>只用 timestamp，60s 内都可以重放攻击。没使用算法，很容易被破解</li>
<li>只用 nonce，存储 nonce 的集合会越来越大，验证 nonce 是否存在于这个集合的耗时会越来越长</li>
<li>用 timestamp+nonce</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="请求数据合法性">请求  数据合法性<a href="#请求数据合法性" class="hash-link" aria-label="请求数据合法性的直接链接" title="请求数据合法性的直接链接">​</a></h4>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="请求认证-authorization鉴权">请求认证 (Authorization)(鉴权)<a href="#请求认证-authorization鉴权" class="hash-link" aria-label="请求认证 (Authorization)(鉴权)的直接链接" title="请求认证 (Authorization)(鉴权)的直接链接">​</a></h4>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="有哪些认证方法">有哪些认证方法？<a href="#有哪些认证方法" class="hash-link" aria-label="有哪些认证方法？的直接链接" title="有哪些认证方法？的直接链接">​</a></h5>
<ul>
<li>Basic Auth, JWT, OAuth 等几种不同的认证方法有什么区别？</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="oauth-协议">OAuth 协议<a href="#oauth-协议" class="hash-link" aria-label="OAuth 协议的直接链接" title="OAuth 协议的直接链接">​</a></h5>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="oauth-协议是什么">OAuth 协议是什么？<a href="#oauth-协议是什么" class="hash-link" aria-label="OAuth 协议是什么？的直接链接" title="OAuth 协议是什么？的直接链接">​</a></h6>
<ul>
<li>OAuth 是一个关于授权的开放网络标准，允许用户让第三方应用访问该用户在某一网站上存储的私密的资源，而无需将用户名和密码提供给第三方应用</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="oauth-协议的工作原理">OAuth 协议的工作原理？<a href="#oauth-协议的工作原理" class="hash-link" aria-label="OAuth 协议的工作原理？的直接链接" title="OAuth 协议的工作原理？的直接链接">​</a></h6>
<ul>
<li>用户（这里是指属于服务方的用户）</li>
<li>服务方（如微信、微博等）</li>
<li>第三方应用</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="oauth2-有哪几种授权 模式">OAuth2 有哪几种授权模式？<a href="#oauth2-有哪几种授权模式" class="hash-link" aria-label="OAuth2 有哪几种授权模式？的直接链接" title="OAuth2 有哪几种授权模式？的直接链接">​</a></h6>
<p><em>总结一下，授权码模式和简化模式适用于大型网站，客户端模式很少被使用，主流是密码模式</em></p>
<ul>
<li><em>密码模式</em>(User Credentials)，适用于不同服务端的应用</li>
<li>客户端模式 (Client Credentials)，适用于不以用户为单位来进行认证的应用</li>
<li>简化模式 (Implicit)，适用于在 js 上使用</li>
<li>授权码模式 (Authorization Code)，适用于在服务端上使用</li>
</ul>
<div class="language-plantuml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plantuml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@startuml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">title Oauth2令牌颁发之授权码模式</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">actor User as user</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">participant &quot;User Agent&quot; as userAgent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">participant &quot;Client&quot; as client</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">participant &quot;Auth Login&quot; as login</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">participant &quot;Auth Server&quot; as server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">autonumber</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">user-&gt;userAgent:访问客户端</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">activate userAgent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">userAgent-&gt;login:重定向到授权页面+clientId+redirectUrl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">activate login</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">login-&gt;server:用户名+密码+clientId+redirectUrl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">activate server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server--&gt;login:返回授权码</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">login--&gt;userAgent:重定向到redirectUrl+授权码code</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deactivate login</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">userAgent-&gt;client:使用授权码code换取令牌</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">activate client</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">client-&gt;server:授权码code+clientId+clientSecret</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server--&gt;client:颁发访问令牌accessToken+refreshToken</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deactivate server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">client--&gt;userAgent:返回访问和刷新令牌</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deactivate client</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">userAgent--&gt; user:令牌颁发完成</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deactivate userAgent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@enduml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="数据加密">数据加密<a href="#数据加密" class="hash-link" aria-label="数据加密的直接链接" title="数据加密的直接链接">​</a></h3>
<ul>
<li>为什么需要数据加密？使用 token 只能起到鉴权的作用</li>
<li>有哪些数据加密方法？</li>
<li>加密解密流程？</li>
<li>为什么抓包软 件能看到明文的 https？（重要）</li>
</ul>
<hr>
<p>因为使用 https 只能保证在传输层请求不被篡改和完整性，必须要做接口做数据加密才能起到防止伪造和重放</p>
<p>通常使用以下方法：</p>
<ul>
<li>laravel 内置加密</li>
<li><code>phpseclib</code></li>
<li>openssl</li>
<li>私有协议二进制打包 (比如微信就通过这种方式进行加密，很麻烦，不多说)</li>
</ul>
<p>但是原理都是相同的：</p>
<p>一种比较好的解决方案就是在客户端请求发起之前先对要请求的数据进行加密，服务端 api 接收到请求数据后再对数据进行解密处理，返回结果给客户端的时候也对要返回的数据进行加密，客户端接收到返回数据的时候再解密。</p>
<hr>
<p><em>https 是在 传输阶段进行加密的，但你本机用抓包软件抓 是在你数据还没进到网卡传送数据之前直接就已经被截获了，所以说 你自己抓自己的就可以 但你要抓别人的 就不可以，这是常识。</em></p>
<p><em>所以我们需要对明文数据进行加密，再进行 https 加密传输，确保数据在传输过程中和本地都是加密的；</em></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="接口升级">接口升级<a href="#接口升级" class="hash-link" aria-label="接口升级的直接链接" title="接口升级的直接链接">​</a></h3>
<p>接口分版本有两种方法</p>
<ul>
<li>一种是通过<code>路由和前缀</code>，映射到不同的命名空间来实现分版本</li>
<li>另一种是通过<code>header里的Accept参数</code>写入不同版本的参数，来实现分版本</li>
</ul>
<p>版本升级的规范：(版本升级要遵循开闭原则，这里有两种比较常见的做法，仅供参考：)</p>
<ul>
<li>单机场景；一个站点兼容所有的版本，但是这种方法因为没有明确地分出版本，所以之后的代码会影响之前的代码，产生 bug</li>
<li>多机场景；不同版本部署在不同的服务器上</li>
</ul>
<p>大版本和小版本的问题</p>
<ul>
<li>对于小版本的修改，最好可以在原接口中做兼容；（比如 v1.0.1 和 v1.1.0 使用不同参数时，服务端通常应该只增不删不改（<em>开放封闭</em>，对扩展开放，对修改封闭），把参数统一返回，即可同时兼容不同的移动端版本）</li>
<li>大版本直接分文件夹。</li>
</ul>
<p>我们要<em>把不同的版本做成不同的分支，比如项目开始只有 test, pre, master，但是一旦 v1 封版了，就应该把当前 master 的代码做成 v1_master 分支</em>（除非有什么紧急 bug，否则绝对不能修改这个分支的代码；<em>master 代表最新版本的生产环境代码，一旦封版，把 master 转为该分支的 master</em>）</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="laravel-starter">laravel-starter<a href="#laravel-starter" class="hash-link" aria-label="laravel-starter的直接链接" title="laravel-starter的直接链接">​</a></h2>
<p>Laravel 的一些坑</p>
<ul>
<li>拿 Laravel 开发时，首先要把缓存关闭，否则上线之后，会出一大堆问题</li>
<li>Laravel 转移文件夹到另一 PC 或者环境后访问出现 500，设置权限为 777</li>
<li>设置路由后页面总是 404 Not Found</li>
<li>php+zipkin</li>
<li>laravel 的 composer 包的 Logger 怎么实现？</li>
<li>单元测试，需要现在 phpunit.xml 里预定义各项配置。如果不使用默认的<code>.env</code>文件，需要通过<code>createApplication()</code>方法指定如<code>.env.dev</code>等配置文件。</li>
</ul>
<hr>
<p>设置路由后页面总是 404 Not Found</p>
<ul>
<li>需要在 apache 配置文件里添加对 Laravel 文件夹的访问</li>
<li>laravel-starter 开发中遇到的问题</li>
<li>dingo 遇到路由前缀问题<!-- -->
<ul>
<li>v 里写了 API_PREFIX=api 之后，路由 url 里必须使用 api 作为前缀，否则 404。</li>
<li>案：使用 API_DOMAIN，而不是 API_PREFIX，在<code>Dingo\Api\Http\Validation\Domain</code>里<code>validate()</code>中打印<code>dd($this-&gt;domain, $request-&gt;header(&#x27;host&#x27;));</code>比较一下。</li>
</ul>
</li>
<li>model 层也需要分模块吗，为了解决 api 版本更迭带来 model 层复用问题</li>
<li>学到了用单元测试来测试 laravel 中间件</li>
</ul>
<hr>
<p>php+zipkin</p>
<ul>
<li>jaeger</li>
<li>zipkin</li>
<li>promethues</li>
</ul>
<p>把这个项目 <a href="https://github.com/Jiannei/lumen-api-starter" target="_blank" rel="noopener noreferrer">Jiannei/lumen-api-starter: Lumen 8 基础上扩展出的 API 启动项目，精心设计的目录结构，规范统一的响应数据格式，Repository 模式架构的最佳实践。</a> 的所有 feature 加进来</p>
<p>参考一下 <a href="https://learnku.com/articles/44675" target="_blank" rel="noopener noreferrer">一份经过时间检验的 Laravel PHPUnit 测试经验分享 | Laravel China 社区</a> 这篇文章 phpunit 的用法，优化测试用例</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">最后<!-- -->由 <b>XBPk3T</b> <!-- -->于 <b><time datetime="2024-10-14T12:11:08.000Z" itemprop="dateModified">2024年10月14日</time></b> <!-- -->更新</span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/zh-Hans/2024/code-spec"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">代码规范</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/zh-Hans/2024/regex"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">regex</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#phpyml" class="table-of-contents__link toc-highlight">php.yml</a></li><li><a href="#php-运行原理" class="table-of-contents__link toc-highlight">PHP 运行原理</a><ul><li><a href="#概述" class="table-of-contents__link toc-highlight">概述</a></li><li><a href="#php-组成部分" class="table-of-contents__link toc-highlight">PHP 组成部分</a></li><li><a href="#sapi" class="table-of-contents__link toc-highlight">Sapi</a></li></ul></li><li><a href="#php-基础" class="table-of-contents__link toc-highlight">PHP 基础</a><ul><li><a href="#php-的-changelog" class="table-of-contents__link toc-highlight">PHP 的 changelog？？</a><ul><li><a href="#php7" class="table-of-contents__link toc-highlight">PHP7</a></li><li><a href="#php8" class="table-of-contents__link toc-highlight">PHP8</a></li></ul></li></ul></li><li><a href="#php-的其他编译方式" class="table-of-contents__link toc-highlight">PHP 的其他编译方式</a></li><li><a href="#php-规范-psr" class="table-of-contents__link toc-highlight">PHP 规范 (PSR)</a></li><li><a href="#php-多线程" class="table-of-contents__link toc-highlight">PHP 多线程</a><ul><li><a href="#类型声明-type-hint" class="table-of-contents__link toc-highlight">类型声明 type hint</a></li></ul></li><li><a href="#php-函数" class="table-of-contents__link toc-highlight">PHP 函数</a><ul><li><a href="#数组相关函数" class="table-of-contents__link toc-highlight">数组相关函数</a></li><li><a href="#字符串相关函数" class="table-of-contents__link toc-highlight">字符串相关函数</a></li><li><a href="#数字相关函数" class="table-of-contents__link toc-highlight">数字相关函数</a></li><li><a href="#文件相关函数" class="table-of-contents__link toc-highlight">文件相关函数</a></li></ul></li><li><a href="#php-垃圾回收" class="table-of-contents__link toc-highlight">PHP 垃圾回收</a><ul><li><a href="#php-的引用计数--同步回收算法的具体流程" class="table-of-contents__link toc-highlight">PHP 的引用计数 + 同步回 收算法的具体流程？</a></li><li><a href="#同步回收具有以下几点特性" class="table-of-contents__link toc-highlight">“同步回收”具有以下几点特性</a></li><li><a href="#怎么评价-rc-这种-gc-算法重要" class="table-of-contents__link toc-highlight">怎么评价 rc 这种 gc 算法？（重要）</a></li><li><a href="#php-的内存管理机制同步回收算法" class="table-of-contents__link toc-highlight">PHP 的内存管理机制（同步回收算法）</a></li></ul></li><li><a href="#php-的-oop" class="table-of-contents__link toc-highlight">PHP 的 OOP</a><ul><li><a href="#变量" class="table-of-contents__link toc-highlight">变量</a></li><li><a href="#常量" class="table-of-contents__link toc-highlight">常量</a></li><li><a href="#修饰符" class="table-of-contents__link toc-highlight">修饰符</a></li><li><a href="#php-运算符" class="table-of-contents__link toc-highlight">PHP 运算符</a></li><li><a href="#流程控制" class="table-of-contents__link toc-highlight">流程控制</a></li><li><a href="#类" class="table-of-contents__link toc-highlight">类</a><ul><li><a href="#抽象类和接口类" class="table-of-contents__link toc-highlight">抽象类和接口类</a></li><li><a href="#trait-可复用类" class="table-of-contents__link toc-highlight">Trait 可复用类</a></li><li><a href="#预定义类" class="table-of-contents__link toc-highlight">预定义类</a></li><li><a href="#预定义接口" class="table-of-contents__link toc-highlight">预定义接口</a></li></ul></li><li><a href="#闭包" class="table-of-contents__link toc-highlight">闭包</a></li><li><a href="#php-的异常处理" class="table-of-contents__link toc-highlight">PHP 的异常处理？</a></li></ul></li><li><a href="#php-工具" class="table-of-contents__link toc-highlight">PHP 工具</a><ul><li><a href="#composer" class="table-of-contents__link toc-highlight">composer</a></li><li><a href="#php-常用工具" class="table-of-contents__link toc-highlight">PHP 常用工具</a><ul><li><a href="#代码规范工具-php-cs-fixer" class="table-of-contents__link toc-highlight">代码规范工具 PHP-CS-Fixer</a></li><li><a href="#静态检查工具" class="table-of-contents__link toc-highlight">静态检查工具</a></li><li><a href="#性能分析工具" class="table-of-contents__link toc-highlight">性能分析工具</a></li><li><a href="#php-有哪些代码加密的方法" class="table-of-contents__link toc-highlight">PHP 有哪些代码加密的方法？</a></li></ul></li><li><a href="#phpunit" class="table-of-contents__link toc-highlight">phpunit</a></li></ul></li><li><a href="#laravel" class="table-of-contents__link toc-highlight">laravel</a><ul><li><a href="#111" class="table-of-contents__link toc-highlight">111</a></li><li><a href="#laravel-核心" class="table-of-contents__link toc-highlight">Laravel 核心</a><ul><li><a href="#路由分发" class="table-of-contents__link toc-highlight">路由分发</a></li></ul></li><li><a href="#服务容器" class="table-of-contents__link toc-highlight">服务容器</a></li><li><a href="#服务提供器" class="table-of-contents__link toc-highlight">服务提供器</a></li><li><a href="#facades" class="table-of-contents__link toc-highlight">Facades</a></li><li><a href="#队列" class="table-of-contents__link toc-highlight">队列</a></li><li><a href="#怎么优化-laravel-框架" class="table-of-contents__link toc-highlight">怎么优化 Laravel 框架？</a></li></ul></li><li><a href="#laravel-接口" class="table-of-contents__link toc-highlight">laravel 接口</a><ul><li><a href="#jwt-auth" class="table-of-contents__link toc-highlight">JWT-Auth</a></li><li><a href="#fractal" class="table-of-contents__link toc-highlight">Fractal</a></li></ul></li><li><a href="#laravel-与接口" class="table-of-contents__link toc-highlight">laravel 与接口</a><ul><li><a href="#接口设计" class="table-of-contents__link toc-highlight">接口设计</a></li><li><a href="#请求合法性" class="table-of-contents__link toc-highlight">请求合法性</a><ul><li><a href="#防 重放攻击" class="table-of-contents__link toc-highlight">防重放攻击</a><ul><li><a href="#有哪些防重放攻击的方法" class="table-of-contents__link toc-highlight">有哪些防重放攻击的方法？</a></li><li><a href="#noncetimestampssign分别是什么" class="table-of-contents__link toc-highlight">nonce/timestamps/sign分别是什么？</a></li><li><a href="#随机串防重服务器验证流程" class="table-of-contents__link toc-highlight">随机串防重，服务器验证流程？</a></li><li><a href="#如果不同时使用这三个参数各自都有什么问题" class="table-of-contents__link toc-highlight">如果不同时使用这三个参数，各自都有什么问题？</a></li></ul></li><li><a href="#请求数据合法性" class="table-of-contents__link toc-highlight">请求数据合法性</a></li><li><a href="#请求认证-authorization鉴权" class="table-of-contents__link toc-highlight">请求认证 (Authorization)(鉴权)</a><ul><li><a href="#有哪些认证方法" class="table-of-contents__link toc-highlight">有哪些认证方法？</a></li><li><a href="#oauth-协议" class="table-of-contents__link toc-highlight">OAuth 协议</a></li></ul></li></ul></li><li><a href="#数据加密" class="table-of-contents__link toc-highlight">数据加密</a></li><li><a href="#接口升级" class="table-of-contents__link toc-highlight">接口升级</a></li></ul></li><li><a href="#laravel-starter" class="table-of-contents__link toc-highlight">laravel-starter</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Docs. Built with Docusaurus. Hosted by Github & Cloudflare.</div></div></div></footer></div>
</body>
</html>